{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { FiHome, FiMonitor, FiPackage, FiUser, FiSettings, FiCreditCard, FiLogOut, FiMenu, FiX } from 'react-icons/fi';\r\nimport './styles/sidebar.css';\r\nimport Link from 'next/link';\r\n\r\n\r\nconst Sidebar = ({ activeSection, setActiveSection }) => {\r\n  const [userRole, setUserRole] = useState(\"user\");\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [user, setUser] = useState(null);\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem('user');\r\n    if (userData) {\r\n      setUser(JSON.parse(userData));\r\n      setUserRole(JSON.parse(userData)?.role?.toLowerCase() || \"user\");\r\n    }\r\n  }, []);\r\n\r\n  const adminSidebarItems = [\r\n    { id: 'dashboard', icon: FiHome, label: 'Admin Dashboard', path: '/admin-dashboard' },\r\n    { id: 'iot-monitoring', icon: FiMonitor, label: 'IoT Monitoring', path: '/admin/iot-monitoring' },\r\n    { id: 'products', icon: FiPackage, label: 'Products Order', path: '/admin/product-order' },\r\n    { id: 'accounts', icon: FiUser, label: 'Accounts', path: '/accounts' },\r\n    //{ id: 'settings', icon: FiSettings, label: 'Settings', path: '/settings' },\r\n    { id: 'payment', icon: FiCreditCard, label: 'Payment History', path: '/payment-history' }\r\n  ];\r\n\r\n  const userSidebarItems = [\r\n    { id: 'dashboard', icon: FiHome, label: 'User Dashboard', path: '/user-dashboard' },\r\n    { id: 'iot-monitoring', icon: FiMonitor, label: 'IoT Monitoring', path: '/user/iot-monitoring' },\r\n    { id: 'products', icon: FiPackage, label: 'Products Order', path: '/user/product-order' },\r\n    { id: 'profile', icon: FiUser, label: 'My Profile', path: '/profile' },\r\n    { id: 'payment', icon: FiCreditCard, label: 'My Payments', path: '/user-payments' }\r\n  ];\r\n\r\n  const sidebarItems = userRole === 'admin' ? adminSidebarItems : userSidebarItems;\r\n\r\n  // Set active section based on current path\r\n  useEffect(() => {\r\n    const currentItem = sidebarItems.find(item => item.path === pathname);\r\n    if (currentItem) {\r\n      setActiveSection(currentItem.id);\r\n    }\r\n  }, [pathname, sidebarItems, setActiveSection]);\r\n\r\n  // Close mobile menu when route changes\r\n  useEffect(() => {\r\n    setIsMobileMenuOpen(false);\r\n  }, [pathname]);\r\n\r\n  // Prevent body scroll when mobile menu is open\r\n  useEffect(() => {\r\n    if (isMobileMenuOpen) {\r\n      document.body.classList.add('mobile-menu-open');\r\n    } else {\r\n      document.body.classList.remove('mobile-menu-open');\r\n    }\r\n    return () => {\r\n      document.body.classList.remove('mobile-menu-open');\r\n    };\r\n  }, [isMobileMenuOpen]);\r\n\r\n  const handleNavigation = (item) => {\r\n    if (item.path) {\r\n      router.push(item.path);\r\n      setActiveSection(item.id);\r\n      setIsMobileMenuOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('refresh_token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('userRole');\r\n\r\n    // optional: remove guest cart\r\n    localStorage.removeItem('guest_cart');\r\n\r\n    router.push('/login');\r\n    window.location.reload(); // Force UI reset\r\n  };\r\n\r\n\r\n  const getUserInitials = () => {\r\n    if (!user) return 'U';\r\n    const { first_name } = user;\r\n    if (first_name) {\r\n      return first_name.charAt(0).toUpperCase();\r\n    }\r\n    return 'U';\r\n  };\r\n\r\n  const getUserDisplayName = () => {\r\n    if (!user) return 'User';\r\n    const { first_name, last_name } = user;\r\n    if (first_name && last_name) {\r\n      return `${first_name} ${last_name}`;\r\n    } else if (first_name) {\r\n      return first_name;\r\n    } else if (last_name) {\r\n      return last_name;\r\n    }\r\n    return user.email || 'User';\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Topbar */}\r\n      <div className=\"topbar\">\r\n        <div className=\"topbar-content\">\r\n          {/* Hamburger Menu for Mobile */}\r\n          <button\r\n            className=\"mobile-menu-toggle\"\r\n            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n            aria-label=\"Toggle menu\"\r\n          >\r\n            {isMobileMenuOpen ? <FiX size={24} /> : <FiMenu size={24} />}\r\n          </button>\r\n\r\n          <h2 className=\"dashboard-title\">\r\n            {userRole === 'admin' ? 'Admin Dashboard' : 'User Dashboard'}\r\n          </h2>\r\n\r\n          <div className=\"topbar-right\">\r\n            <span className=\"welcome-text\">Welcome, {getUserDisplayName()}</span>\r\n            <div className=\"user-avatar\">{getUserInitials()}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Overlay */}\r\n      {isMobileMenuOpen && (\r\n        <div\r\n          className=\"mobile-overlay\"\r\n          onClick={() => setIsMobileMenuOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <div className={`sidebar ${isMobileMenuOpen ? 'mobile-open' : ''}`}>\r\n        <div className=\"sidebar-header\">\r\n          <Link href=\"/\">\r\n            <img\r\n              src=\"/assets/logo2.png\"\r\n              alt=\"Logo\"\r\n              className=\"img-fluid sidebar-logo\"\r\n            />\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"sidebar-menu\">\r\n          {sidebarItems.map(item => (\r\n            <div\r\n              key={item.id}\r\n              className={`sidebar-item ${activeSection === item.id ? 'active' : ''}`}\r\n              onClick={() => handleNavigation(item)}\r\n            >\r\n              <item.icon className=\"sidebar-icon\" />\r\n              <span>{item.label}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"sidebar-footer\">\r\n          <div className=\"sidebar-item logout-item\" onClick={handleLogout}>\r\n            <FiLogOut className=\"sidebar-icon\" />\r\n            <span>Logout</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/pages/RoomDetail.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { Container, Row, Col, Card, Spinner, Alert, Badge, ProgressBar, Button } from 'react-bootstrap';\r\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, AreaChart, Area } from 'recharts';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { FiThermometer, FiDroplet, FiClock, FiActivity, FiArrowLeft, FiRefreshCw, FiRadio } from 'react-icons/fi';\r\nimport Sidebar from '../Sidebar';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst API_BASE_URL = \"https://mycomatrix.in/api\";\r\n\r\nconst RoomDetail = () => {\r\n  const { id } = useParams();\r\n  const router = useRouter();\r\n  const { isAuthenticated, token } = useAuth();\r\n\r\n  const [sensorData, setSensorData] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [roomInfo, setRoomInfo] = useState(null);\r\n  const [activeSection, setActiveSection] = useState('iot-monitoring');\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [lastUpdateTime, setLastUpdateTime] = useState(null);\r\n  const [autoRefreshEnabled, setAutoRefreshEnabled] = useState(true);\r\n  const [userLoginTime, setUserLoginTime] = useState(new Date());\r\n\r\n  // Refs for intervals\r\n  const pollingIntervalRef = useRef(null);\r\n\r\n  // âœ… Configure axios headers with auth token\r\n  const getAuthHeaders = () => {\r\n    return {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json'\r\n    };\r\n  };\r\n\r\n  // âœ… Clean up intervals on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (pollingIntervalRef.current) {\r\n        clearInterval(pollingIntervalRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // âœ… FIXED - Always show 6 intervals from login time, fill with available data\r\n  const create5MinuteIntervalData = (rawData) => {\r\n    if (!rawData || rawData.length === 0) {\r\n      // If no data, create empty intervals starting from login time\r\n      return createEmptyIntervals();\r\n    }\r\n\r\n    console.log(`ðŸ•’ Processing ${rawData.length} raw data points`);\r\n\r\n    const referenceTime = userLoginTime;\r\n    console.log('ðŸ‘¤ Chart reference time (login time):', referenceTime.toLocaleTimeString());\r\n\r\n    const sortedData = [...rawData].sort((a, b) =>\r\n      new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()\r\n    );\r\n    const latestData = sortedData[0]; // Most recent data\r\n\r\n    const intervalData = [];\r\n    const intervalMs = 5 * 60 * 1000;\r\n\r\n    // âœ… ALWAYS CREATE 6 INTERVALS starting from login time\r\n    for (let i = 0; i < 6; i++) {\r\n      const pointTime = new Date(referenceTime.getTime() + (i * intervalMs));\r\n\r\n      // Find the BEST data for this time slot\r\n      let bestData = null;\r\n      let bestTimeDiff = Infinity;\r\n\r\n      // Look for exact or close match\r\n      sortedData.forEach(data => {\r\n        const dataTime = new Date(data.timestamp);\r\n        const timeDiff = Math.abs(dataTime.getTime() - pointTime.getTime());\r\n\r\n        if (timeDiff < bestTimeDiff) {\r\n          bestData = data;\r\n          bestTimeDiff = timeDiff;\r\n        }\r\n      });\r\n\r\n      // If we found reasonably close data (within 7.5 minutes), use it\r\n      // Otherwise use the most recent data\r\n      const dataToUse = (bestData && bestTimeDiff <= (7.5 * 60 * 1000)) ? bestData : latestData;\r\n\r\n      if (dataToUse) {\r\n        intervalData.push({\r\n          time: pointTime.toLocaleTimeString('en-IN', {\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            hour12: true\r\n          }).toUpperCase().replace(' ', ''),\r\n          temperature: dataToUse.temperature,\r\n          humidity: dataToUse.humidity,\r\n          timestamp: pointTime.toISOString(),\r\n          isEstimated: bestTimeDiff > (2.5 * 60 * 1000) // Mark as estimated if not very close\r\n        });\r\n      }\r\n    }\r\n\r\n    console.log(`âœ… Created ${intervalData.length} fixed intervals from login time`);\r\n    console.log('ðŸ“… 6 Time intervals:', intervalData.map(d => `${d.time}${d.isEstimated ? ' (est)' : ''}`));\r\n    console.log('ðŸŒ¡ï¸ Temperatures:', intervalData.map(d => d.temperature));\r\n    console.log('ðŸ’§ Humidities:', intervalData.map(d => d.humidity));\r\n\r\n    return intervalData;\r\n  };\r\n\r\n  // âœ… Helper function to create empty intervals when no data\r\n  const createEmptyIntervals = () => {\r\n    const referenceTime = userLoginTime;\r\n    const intervalMs = 5 * 60 * 1000;\r\n    const emptyData = [];\r\n\r\n    for (let i = 0; i < 6; i++) {\r\n      const pointTime = new Date(referenceTime.getTime() + (i * intervalMs));\r\n\r\n      emptyData.push({\r\n        time: pointTime.toLocaleTimeString('en-IN', {\r\n          hour: '2-digit',\r\n          minute: '2-digit',\r\n          hour12: true\r\n        }).toUpperCase().replace(' ', ''),\r\n        temperature: 0,\r\n        humidity: 0,\r\n        timestamp: pointTime.toISOString(),\r\n        isEstimated: true,\r\n        isEmpty: true\r\n      });\r\n    }\r\n\r\n    console.log('ðŸ“­ Created empty intervals starting from login time');\r\n    return emptyData;\r\n  };\r\n\r\n  // âœ… Updated fetchHistoricalData\r\n  const fetchHistoricalData = async (roomId) => {\r\n    try {\r\n      const sensorHistoryResponse = await axios.get(\r\n        `${API_BASE_URL}/sensor-data/list/`,\r\n        { headers: getAuthHeaders() }\r\n      );\r\n\r\n      // Filter data for this specific room\r\n      const allRoomData = sensorHistoryResponse.data\r\n        .filter(data => data.room === roomId);\r\n\r\n      console.log(`ðŸ“Š Found ${allRoomData.length} data points for room ${roomId}`);\r\n\r\n      // Create 6 fixed intervals from login time\r\n      const roomSensorData = create5MinuteIntervalData(allRoomData);\r\n\r\n      setSensorData(roomSensorData);\r\n\r\n    } catch (historyError) {\r\n      console.log('âŒ Error fetching historical data:', historyError);\r\n      // Even if error, create empty intervals to maintain 6-point chart\r\n      const emptyData = createEmptyIntervals();\r\n      setSensorData(emptyData);\r\n    }\r\n  };\r\n\r\n  // âœ… Fetch latest sensor data (lightweight - only checks for new data)\r\n  const fetchLatestSensorData = async () => {\r\n    try {\r\n      if (!roomInfo) return;\r\n\r\n      const response = await axios.get(\r\n        `${API_BASE_URL}/rooms/kit/${roomInfo.kit_id}/`,\r\n        { headers: getAuthHeaders() }\r\n      );\r\n\r\n      if (response.data.success) {\r\n        const roomData = response.data.room;\r\n        const latestSensorData = response.data.latest_sensor_data;\r\n\r\n        // Update room info with new data\r\n        setRoomInfo(prev => ({\r\n          ...prev,\r\n          status: roomData.status || 'optimal',\r\n          lastUpdated: roomData.updated_at,\r\n          currentStats: {\r\n            temperature: latestSensorData?.temperature || roomData.temperature,\r\n            humidity: latestSensorData?.humidity || roomData.humidity,\r\n            timestamp: latestSensorData?.timestamp\r\n          }\r\n        }));\r\n\r\n        // Fetch updated historical data for charts\r\n        await fetchHistoricalData(roomData.id);\r\n        setLastUpdateTime(new Date().toLocaleTimeString());\r\n      }\r\n    } catch (error) {\r\n      console.log('âŒ Error checking latest data:', error);\r\n    }\r\n  };\r\n\r\n  // âœ… Main data fetching function\r\n  const fetchRoomData = async (isRefresh = false) => {\r\n    if (isRefresh) setRefreshing(true);\r\n\r\n    try {\r\n      if (!isRefresh) setIsLoading(true);\r\n      setError(null);\r\n\r\n      let roomDataFromState = null;\r\n      if (typeof window !== 'undefined') {\r\n        const storedData = sessionStorage.getItem('roomData');\r\n        if (storedData) {\r\n          roomDataFromState = JSON.parse(storedData);\r\n          // Optional: Clear it if you only want it once, but keeping it might be better for refresh\r\n        }\r\n      }\r\n\r\n      if (roomDataFromState) {\r\n        console.log('ðŸ“¦ Room data from state:', roomDataFromState);\r\n\r\n        // âœ… 1. Get room details with latest sensor data\r\n        try {\r\n          const roomResponse = await axios.get(\r\n            `${API_BASE_URL}/rooms/kit/${roomDataFromState.kit_id}/`,\r\n            { headers: getAuthHeaders() }\r\n          );\r\n\r\n          console.log('âœ… Room with sensor data:', roomResponse.data);\r\n\r\n          if (roomResponse.data.success) {\r\n            const roomData = roomResponse.data.room;\r\n            const latestSensorData = roomResponse.data.latest_sensor_data;\r\n\r\n            // âœ… Set room info with real data\r\n            setRoomInfo({\r\n              id: roomData.id,\r\n              name: roomData.name,\r\n              kit_id: roomData.kit_id,\r\n              status: roomData.status || 'optimal',\r\n              type: 'Shiitake Mushroom',\r\n              capacity: '500kg',\r\n              lastUpdated: roomData.updated_at,\r\n              currentStats: {\r\n                temperature: latestSensorData?.temperature || roomData.temperature,\r\n                humidity: latestSensorData?.humidity || roomData.humidity,\r\n                timestamp: latestSensorData?.timestamp\r\n              }\r\n            });\r\n\r\n            await fetchHistoricalData(roomData.id);\r\n\r\n            setLastUpdateTime(new Date().toLocaleTimeString());\r\n          }\r\n        } catch (sensorError) {\r\n          console.log('âŒ Sensor API error:', sensorError);\r\n          setError('Failed to load sensor data from server.');\r\n        }\r\n      } else {\r\n        // âœ… If no state data, try to fetch from API using room ID\r\n        console.log('ðŸ” No state data, fetching from API with room ID:', id);\r\n        try {\r\n          const roomResponse = await axios.get(\r\n            `${API_BASE_URL}/rooms/detail/${id}/`,\r\n            { headers: getAuthHeaders() }\r\n          );\r\n\r\n          console.log('âœ… Room data from API:', roomResponse.data);\r\n          setRoomInfo({\r\n            ...roomResponse.data,\r\n            currentStats: {\r\n              temperature: roomResponse.data.temperature || 0,\r\n              humidity: roomResponse.data.humidity || 0\r\n            }\r\n          });\r\n\r\n          await fetchHistoricalData(id);\r\n          setLastUpdateTime(new Date().toLocaleTimeString());\r\n        } catch (apiError) {\r\n          console.error('âŒ API Error:', apiError);\r\n          setError('Failed to load room data from server.');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('âŒ Error fetching room data:', err);\r\n      setError('Failed to load room data. Please try again later.');\r\n    } finally {\r\n      if (isRefresh) {\r\n        setRefreshing(false);\r\n      } else {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  // âœ… Start automatic data polling\r\n  const startAutoRefresh = () => {\r\n    // Clear existing interval\r\n    if (pollingIntervalRef.current) {\r\n      clearInterval(pollingIntervalRef.current);\r\n    }\r\n\r\n    // Poll every 30 seconds for new data\r\n    pollingIntervalRef.current = setInterval(() => {\r\n      if (autoRefreshEnabled && roomInfo?.id) {\r\n        console.log('ðŸ”„ Auto-refresh fetching latest data...');\r\n        fetchLatestSensorData();\r\n      }\r\n    }, 30000); // 30 seconds\r\n\r\n    console.log('ðŸ”„ Auto-refresh started (30s intervals)');\r\n  };\r\n\r\n  // âœ… Stop automatic data polling\r\n  const stopAutoRefresh = () => {\r\n    if (pollingIntervalRef.current) {\r\n      clearInterval(pollingIntervalRef.current);\r\n      pollingIntervalRef.current = null;\r\n    }\r\n    console.log('ðŸ›‘ Auto-refresh stopped');\r\n  };\r\n\r\n  // âœ… Toggle auto refresh\r\n  const toggleAutoRefresh = () => {\r\n    if (autoRefreshEnabled) {\r\n      stopAutoRefresh();\r\n      setAutoRefreshEnabled(false);\r\n    } else {\r\n      setAutoRefreshEnabled(true);\r\n      startAutoRefresh();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated || !token) {\r\n      router.push('/login');\r\n      return;\r\n    }\r\n\r\n    // Set login time when component mounts\r\n    setUserLoginTime(new Date());\r\n    fetchRoomData();\r\n\r\n    return () => {\r\n      stopAutoRefresh();\r\n    };\r\n  }, [id, isAuthenticated, token, router]);\r\n\r\n  useEffect(() => {\r\n    if (roomInfo?.id && autoRefreshEnabled) {\r\n      startAutoRefresh();\r\n    }\r\n  }, [roomInfo, autoRefreshEnabled]);\r\n\r\n  // âœ… Handle back to monitoring page\r\n  const handleBackToMonitoring = () => {\r\n    router.push('/user/iot-monitoring');\r\n  };\r\n\r\n  // âœ… Refresh sensor data manually\r\n  const handleRefresh = () => {\r\n    fetchRoomData(true);\r\n  };\r\n\r\n  // âœ… Updated renderChart function\r\n  const renderChart = (dataKey, color, name, unit = '') => {\r\n    const hasValidData = sensorData.length > 0 && sensorData.some(d => !d.isEmpty && d[dataKey] > 0);\r\n\r\n    return (\r\n      <Card className=\"mb-4 chart-card border-0 shadow-sm\">\r\n        <Card.Header className=\"bg-white border-bottom-0 pb-2\">\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <h6 className=\"mb-0 fw-bold\">{name}</h6>\r\n            <div className=\"d-flex align-items-center gap-2\">\r\n              <Badge bg=\"light\" text=\"dark\" className=\"px-2 py-1\">\r\n                {hasValidData ? `${sensorData[sensorData.length - 1][dataKey]}${unit}` : `--${unit}`}\r\n              </Badge>\r\n              {lastUpdateTime && (\r\n                <small className=\"text-muted\" title=\"Last auto-update\">\r\n                  <FiRadio size={12} className=\"text-success me-1\" />\r\n                  {lastUpdateTime}\r\n                </small>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </Card.Header>\r\n        <Card.Body className=\"pt-0\">\r\n          <div style={{ height: '200px' }}>\r\n            {hasValidData ? (\r\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                <AreaChart\r\n                  data={sensorData}\r\n                  margin={{\r\n                    top: 10,\r\n                    right: 10,\r\n                    left: 10,\r\n                    bottom: 10,\r\n                  }}\r\n                >\r\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\r\n                  <XAxis\r\n                    dataKey=\"time\"\r\n                    tick={{ fontSize: 11 }}\r\n                    interval={0}\r\n                  />\r\n                  <YAxis\r\n                    tick={{ fontSize: 11 }}\r\n                    domain={['dataMin - 1', 'dataMax + 1']}\r\n                  />\r\n                  <Tooltip\r\n                    formatter={(value) => [`${value}${unit}`, name]}\r\n                    labelFormatter={(label) => `Time: ${label}`}\r\n                  />\r\n                  <Area\r\n                    type=\"monotone\"\r\n                    dataKey={dataKey}\r\n                    stroke={color}\r\n                    fill={`${color}20`}\r\n                    strokeWidth={2}\r\n                    dot={{ r: 3 }}\r\n                    activeDot={{ r: 5, fill: color }}\r\n                    name={name}\r\n                  />\r\n                </AreaChart>\r\n              </ResponsiveContainer>\r\n            ) : (\r\n              <div className=\"d-flex justify-content-center align-items-center h-100\">\r\n                <p className=\"text-muted\">Waiting for sensor data...</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Card.Body>\r\n      </Card>\r\n    );\r\n  };\r\n\r\n  const renderCurrentStats = () => (\r\n    <Row className=\"mb-4 g-3\">\r\n      <Col md={6}>\r\n        <Card className=\"stat-card h-100 border-0 shadow-sm\">\r\n          <Card.Body className=\"p-3\">\r\n            <div className=\"d-flex align-items-center mb-3\">\r\n              <div className=\"bg-danger bg-opacity-10 p-2 rounded-circle me-3\">\r\n                <FiThermometer size={20} className=\"text-danger\" />\r\n              </div>\r\n              <div>\r\n                <h6 className=\"text-muted mb-0\">Temperature</h6>\r\n                <h4 className=\"text-danger mb-0\">\r\n                  {roomInfo?.currentStats?.temperature ? `${roomInfo.currentStats.temperature}Â°C` : '--'}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n            <ProgressBar\r\n              now={roomInfo?.currentStats?.temperature ? ((roomInfo.currentStats.temperature - 20) / 10) * 100 : 0}\r\n              variant={\r\n                roomInfo?.currentStats?.temperature >= 22 && roomInfo?.currentStats?.temperature <= 26 ? 'success' :\r\n                  roomInfo?.currentStats?.temperature >= 18 && roomInfo?.currentStats?.temperature <= 28 ? 'warning' : 'danger'\r\n              }\r\n              className=\"mb-1\"\r\n              style={{ height: '6px' }}\r\n            />\r\n            <small className=\"text-muted\">Optimal: 22-26Â°C</small>\r\n          </Card.Body>\r\n        </Card>\r\n      </Col>\r\n\r\n      <Col md={6}>\r\n        <Card className=\"stat-card h-100 border-0 shadow-sm\">\r\n          <Card.Body className=\"p-3\">\r\n            <div className=\"d-flex align-items-center mb-3\">\r\n              <div className=\"bg-info bg-opacity-10 p-2 rounded-circle me-3\">\r\n                <FiDroplet size={20} className=\"text-info\" />\r\n              </div>\r\n              <div>\r\n                <h6 className=\"text-muted mb-0\">Humidity</h6>\r\n                <h4 className=\"text-info mb-0\">\r\n                  {roomInfo?.currentStats?.humidity ? `${roomInfo.currentStats.humidity}%` : '--'}\r\n                </h4>\r\n              </div>\r\n            </div>\r\n            <ProgressBar\r\n              now={roomInfo?.currentStats?.humidity || 0}\r\n              variant={\r\n                roomInfo?.currentStats?.humidity >= 75 && roomInfo?.currentStats?.humidity <= 85 ? 'success' :\r\n                  roomInfo?.currentStats?.humidity >= 70 && roomInfo?.currentStats?.humidity <= 90 ? 'warning' : 'danger'\r\n              }\r\n              className=\"mb-1\"\r\n              style={{ height: '6px' }}\r\n            />\r\n            <small className=\"text-muted\">Optimal: 75-85%</small>\r\n          </Card.Body>\r\n        </Card>\r\n      </Col>\r\n    </Row>\r\n  );\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} />\r\n        <div className=\"main-content\">\r\n          <div className=\"dashboard-content\">\r\n            <div className=\"text-center my-5\">\r\n              <Spinner animation=\"border\" role=\"status\" className=\"mb-3\">\r\n                <span className=\"visually-hidden\">Loading...</span>\r\n              </Spinner>\r\n              <p>Loading room sensor data...</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} />\r\n        <div className=\"main-content\">\r\n          <div className=\"dashboard-content\">\r\n            <Alert variant=\"danger\" className=\"my-4\">\r\n              {error}\r\n            </Alert>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!roomInfo) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} />\r\n        <div className=\"main-content\">\r\n          <div className=\"dashboard-content\">\r\n            <Alert variant=\"warning\" className=\"my-4\">\r\n              Room information not available.\r\n            </Alert>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} />\r\n\r\n      <div className=\"main-content\">\r\n        <div className=\"dashboard-content\">\r\n          {/* Header with Back Button */}\r\n          <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n            <div className=\"d-flex align-items-center\">\r\n              <Button\r\n                variant=\"outline-secondary\"\r\n                size=\"sm\"\r\n                onClick={handleBackToMonitoring}\r\n                className=\"me-3\"\r\n              >\r\n                <FiArrowLeft className=\"me-1\" />\r\n                Back\r\n              </Button>\r\n              <div>\r\n                <h2 className=\"mb-1\">{roomInfo.name}</h2>\r\n                <p className=\"text-muted mb-0\">\r\n                  <FiClock className=\"me-1\" />\r\n                  Login Time: {userLoginTime.toLocaleTimeString()}\r\n                  {roomInfo.lastUpdated && ` â€¢ Last data: ${new Date(roomInfo.lastUpdated).toLocaleTimeString()}`}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"d-flex gap-2\">\r\n              <Button\r\n                variant={autoRefreshEnabled ? \"success\" : \"outline-secondary\"}\r\n                size=\"sm\"\r\n                onClick={toggleAutoRefresh}\r\n                title={autoRefreshEnabled ? \"Auto-refresh enabled\" : \"Auto-refresh disabled\"}\r\n              >\r\n                <FiRadio className={autoRefreshEnabled ? \"text-white\" : \"\"} />\r\n                {autoRefreshEnabled ? ' Live' : ' Off'}\r\n              </Button>\r\n              <Button\r\n                variant=\"outline-primary\"\r\n                size=\"sm\"\r\n                onClick={handleRefresh}\r\n                disabled={refreshing}\r\n              >\r\n                <FiRefreshCw className={refreshing ? 'spinner' : ''} />\r\n                {refreshing ? ' Refreshing...' : ' Refresh'}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Auto-refresh Status */}\r\n          {autoRefreshEnabled && (\r\n            <Alert variant=\"info\" className=\"py-2 mb-3\">\r\n              <div className=\"d-flex align-items-center\">\r\n                <FiRadio className=\"me-2\" />\r\n                <small>\r\n                  <strong>Live Updates:</strong> Data refreshes automatically every 30 seconds\r\n                  {lastUpdateTime && ` â€¢ Last update: ${lastUpdateTime}`}\r\n                </small>\r\n              </div>\r\n            </Alert>\r\n          )}\r\n\r\n          {/* Current Statistics */}\r\n          {renderCurrentStats()}\r\n\r\n          {/* Charts Grid - ONLY TEMP & HUMIDITY */}\r\n          <Row>\r\n            <Col lg={6} className=\"mb-4\">\r\n              {renderChart('temperature', '#ff6b6b', 'Temperature', 'Â°C')}\r\n            </Col>\r\n            <Col lg={6} className=\"mb-4\">\r\n              {renderChart('humidity', '#4dabf7', 'Humidity', '%')}\r\n            </Col>\r\n          </Row>\r\n\r\n          {/* Room Information */}\r\n          <Row>\r\n            <Col md={6}>\r\n              <Card className=\"border-0 shadow-sm\">\r\n                <Card.Header className=\"bg-white border-bottom-0\">\r\n                  <h6 className=\"mb-0 fw-bold\">Optimal Ranges</h6>\r\n                </Card.Header>\r\n                <Card.Body>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-6 mb-3\">\r\n                      <small className=\"text-muted\">Temperature</small>\r\n                      <div className=\"fw-bold\">22-26Â°C</div>\r\n                      <small className=\"text-muted\">\r\n                        Current: {roomInfo?.currentStats?.temperature ? `${roomInfo.currentStats.temperature}Â°C` : '--'}\r\n                      </small>\r\n                    </div>\r\n                    <div className=\"col-6 mb-3\">\r\n                      <small className=\"text-muted\">Humidity</small>\r\n                      <div className=\"fw-bold\">75-85%</div>\r\n                      <small className=\"text-muted\">\r\n                        Current: {roomInfo?.currentStats?.humidity ? `${roomInfo.currentStats.humidity}%` : '--'}\r\n                      </small>\r\n                    </div>\r\n                    <div className=\"col-12 mt-2\">\r\n                      <div className=\"alert alert-info mb-0\">\r\n                        <small>\r\n                          <strong>Status Guide:</strong><br />\r\n                          â€¢ <Badge bg=\"success\">Optimal</Badge>: Temp 22-26Â°C & Humidity 75-85%<br />\r\n                          â€¢ <Badge bg=\"warning\">Warning</Badge>: Temp 18-28Â°C & Humidity 70-90%<br />\r\n                          â€¢ <Badge bg=\"danger\">Critical</Badge>: Outside optimal ranges\r\n                        </small>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col md={6}>\r\n              <Card className=\"border-0 shadow-sm\">\r\n                <Card.Header className=\"bg-white border-bottom-0\">\r\n                  <h6 className=\"mb-0 fw-bold\">Room Details</h6>\r\n                </Card.Header>\r\n                <Card.Body>\r\n                  <div className=\"row\">\r\n                    <div className=\"col-6 mb-3\">\r\n                      <small className=\"text-muted\">Kit ID</small>\r\n                      <div className=\"fw-bold\">{roomInfo.kit_id}</div>\r\n                    </div>\r\n                    <div className=\"col-6 mb-3\">\r\n                      <small className=\"text-muted\">Room Type</small>\r\n                      <div className=\"fw-bold\">{roomInfo.type}</div>\r\n                    </div>\r\n                    <div className=\"col-6 mb-3\">\r\n                      <small className=\"text-muted\">Capacity</small>\r\n                      <div className=\"fw-bold\">{roomInfo.capacity}</div>\r\n                    </div>\r\n                    <div className=\"col-6 mb-3\">\r\n                      <small className=\"text-muted\">Chart Start</small>\r\n                      <div className=\"fw-bold\">{userLoginTime.toLocaleTimeString()}</div>\r\n                    </div>\r\n                  </div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RoomDetail;\r\n"],"names":[],"mappings":"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"}}]
}