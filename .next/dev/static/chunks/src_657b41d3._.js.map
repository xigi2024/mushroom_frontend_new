{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { FiHome, FiMonitor, FiPackage, FiUser, FiSettings, FiCreditCard, FiLogOut, FiMenu, FiX } from 'react-icons/fi';\r\nimport './styles/sidebar.css';\r\nimport Link from 'next/link';\r\n\r\n\r\nconst Sidebar = ({ activeSection, setActiveSection }) => {\r\n  const [userRole, setUserRole] = useState(\"user\");\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [user, setUser] = useState(null);\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem('user');\r\n    if (userData) {\r\n      setUser(JSON.parse(userData));\r\n      setUserRole(JSON.parse(userData)?.role?.toLowerCase() || \"user\");\r\n    }\r\n  }, []);\r\n\r\n  const adminSidebarItems = [\r\n    { id: 'dashboard', icon: FiHome, label: 'Admin Dashboard', path: '/admin-dashboard' },\r\n    { id: 'iot-monitoring', icon: FiMonitor, label: 'IoT Monitoring', path: '/admin/iot-monitoring' },\r\n    { id: 'products', icon: FiPackage, label: 'Products Order', path: '/admin/product-order' },\r\n    { id: 'accounts', icon: FiUser, label: 'Accounts', path: '/accounts' },\r\n    //{ id: 'settings', icon: FiSettings, label: 'Settings', path: '/settings' },\r\n    { id: 'payment', icon: FiCreditCard, label: 'Payment History', path: '/payment-history' }\r\n  ];\r\n\r\n  const userSidebarItems = [\r\n    { id: 'dashboard', icon: FiHome, label: 'User Dashboard', path: '/user-dashboard' },\r\n    { id: 'iot-monitoring', icon: FiMonitor, label: 'IoT Monitoring', path: '/user/iot-monitoring' },\r\n    { id: 'products', icon: FiPackage, label: 'Products Order', path: '/user/product-order' },\r\n    { id: 'profile', icon: FiUser, label: 'My Profile', path: '/profile' },\r\n    { id: 'payment', icon: FiCreditCard, label: 'My Payments', path: '/user-payments' }\r\n  ];\r\n\r\n  const sidebarItems = userRole === 'admin' ? adminSidebarItems : userSidebarItems;\r\n\r\n  // Set active section based on current path\r\n  useEffect(() => {\r\n    const currentItem = sidebarItems.find(item => item.path === pathname);\r\n    if (currentItem) {\r\n      setActiveSection(currentItem.id);\r\n    }\r\n  }, [pathname, sidebarItems, setActiveSection]);\r\n\r\n  // Close mobile menu when route changes\r\n  useEffect(() => {\r\n    setIsMobileMenuOpen(false);\r\n  }, [pathname]);\r\n\r\n  // Prevent body scroll when mobile menu is open\r\n  useEffect(() => {\r\n    if (isMobileMenuOpen) {\r\n      document.body.classList.add('mobile-menu-open');\r\n    } else {\r\n      document.body.classList.remove('mobile-menu-open');\r\n    }\r\n    return () => {\r\n      document.body.classList.remove('mobile-menu-open');\r\n    };\r\n  }, [isMobileMenuOpen]);\r\n\r\n  const handleNavigation = (item) => {\r\n    if (item.path) {\r\n      router.push(item.path);\r\n      setActiveSection(item.id);\r\n      setIsMobileMenuOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('refresh_token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('userRole');\r\n\r\n    // optional: remove guest cart\r\n    localStorage.removeItem('guest_cart');\r\n\r\n    router.push('/login');\r\n    window.location.reload(); // Force UI reset\r\n  };\r\n\r\n\r\n  const getUserInitials = () => {\r\n    if (!user) return 'U';\r\n    const { first_name } = user;\r\n    if (first_name) {\r\n      return first_name.charAt(0).toUpperCase();\r\n    }\r\n    return 'U';\r\n  };\r\n\r\n  const getUserDisplayName = () => {\r\n    if (!user) return 'User';\r\n    const { first_name, last_name } = user;\r\n    if (first_name && last_name) {\r\n      return `${first_name} ${last_name}`;\r\n    } else if (first_name) {\r\n      return first_name;\r\n    } else if (last_name) {\r\n      return last_name;\r\n    }\r\n    return user.email || 'User';\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Topbar */}\r\n      <div className=\"topbar\">\r\n        <div className=\"topbar-content\">\r\n          {/* Hamburger Menu for Mobile */}\r\n          <button\r\n            className=\"mobile-menu-toggle\"\r\n            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n            aria-label=\"Toggle menu\"\r\n          >\r\n            {isMobileMenuOpen ? <FiX size={24} /> : <FiMenu size={24} />}\r\n          </button>\r\n\r\n          <h2 className=\"dashboard-title\">\r\n            {userRole === 'admin' ? 'Admin Dashboard' : 'User Dashboard'}\r\n          </h2>\r\n\r\n          <div className=\"topbar-right\">\r\n            <span className=\"welcome-text\">Welcome, {getUserDisplayName()}</span>\r\n            <div className=\"user-avatar\">{getUserInitials()}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Overlay */}\r\n      {isMobileMenuOpen && (\r\n        <div\r\n          className=\"mobile-overlay\"\r\n          onClick={() => setIsMobileMenuOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <div className={`sidebar ${isMobileMenuOpen ? 'mobile-open' : ''}`}>\r\n        <div className=\"sidebar-header\">\r\n          <Link href=\"/\">\r\n            <img\r\n              src=\"/assets/logo2.png\"\r\n              alt=\"Logo\"\r\n              className=\"img-fluid sidebar-logo\"\r\n            />\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"sidebar-menu\">\r\n          {sidebarItems.map(item => (\r\n            <div\r\n              key={item.id}\r\n              className={`sidebar-item ${activeSection === item.id ? 'active' : ''}`}\r\n              onClick={() => handleNavigation(item)}\r\n            >\r\n              <item.icon className=\"sidebar-icon\" />\r\n              <span>{item.label}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"sidebar-footer\">\r\n          <div className=\"sidebar-item logout-item\" onClick={handleLogout}>\r\n            <FiLogOut className=\"sidebar-icon\" />\r\n            <span>Logout</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;;;AALA;;;;;;AAQA,MAAM,UAAU,CAAC,EAAE,aAAa,EAAE,gBAAgB,EAAE;;IAClD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IAEzD,IAAA,0KAAS;6BAAC;YACR,MAAM,WAAW,aAAa,OAAO,CAAC;YACtC,IAAI,UAAU;gBACZ,QAAQ,KAAK,KAAK,CAAC;gBACnB,YAAY,KAAK,KAAK,CAAC,WAAW,MAAM,iBAAiB;YAC3D;QACF;4BAAG,EAAE;IAEL,MAAM,oBAAoB;QACxB;YAAE,IAAI;YAAa,MAAM,2JAAM;YAAE,OAAO;YAAmB,MAAM;QAAmB;QACpF;YAAE,IAAI;YAAkB,MAAM,8JAAS;YAAE,OAAO;YAAkB,MAAM;QAAwB;QAChG;YAAE,IAAI;YAAY,MAAM,8JAAS;YAAE,OAAO;YAAkB,MAAM;QAAuB;QACzF;YAAE,IAAI;YAAY,MAAM,2JAAM;YAAE,OAAO;YAAY,MAAM;QAAY;QACrE,6EAA6E;QAC7E;YAAE,IAAI;YAAW,MAAM,iKAAY;YAAE,OAAO;YAAmB,MAAM;QAAmB;KACzF;IAED,MAAM,mBAAmB;QACvB;YAAE,IAAI;YAAa,MAAM,2JAAM;YAAE,OAAO;YAAkB,MAAM;QAAkB;QAClF;YAAE,IAAI;YAAkB,MAAM,8JAAS;YAAE,OAAO;YAAkB,MAAM;QAAuB;QAC/F;YAAE,IAAI;YAAY,MAAM,8JAAS;YAAE,OAAO;YAAkB,MAAM;QAAsB;QACxF;YAAE,IAAI;YAAW,MAAM,2JAAM;YAAE,OAAO;YAAc,MAAM;QAAW;QACrE;YAAE,IAAI;YAAW,MAAM,iKAAY;YAAE,OAAO;YAAe,MAAM;QAAiB;KACnF;IAED,MAAM,eAAe,aAAa,UAAU,oBAAoB;IAEhE,2CAA2C;IAC3C,IAAA,0KAAS;6BAAC;YACR,MAAM,cAAc,aAAa,IAAI;iDAAC,CAAA,OAAQ,KAAK,IAAI,KAAK;;YAC5D,IAAI,aAAa;gBACf,iBAAiB,YAAY,EAAE;YACjC;QACF;4BAAG;QAAC;QAAU;QAAc;KAAiB;IAE7C,uCAAuC;IACvC,IAAA,0KAAS;6BAAC;YACR,oBAAoB;QACtB;4BAAG;QAAC;KAAS;IAEb,+CAA+C;IAC/C,IAAA,0KAAS;6BAAC;YACR,IAAI,kBAAkB;gBACpB,SAAS,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;YAC9B,OAAO;gBACL,SAAS,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YACjC;YACA;qCAAO;oBACL,SAAS,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACjC;;QACF;4BAAG;QAAC;KAAiB;IAErB,MAAM,mBAAmB,CAAC;QACxB,IAAI,KAAK,IAAI,EAAE;YACb,OAAO,IAAI,CAAC,KAAK,IAAI;YACrB,iBAAiB,KAAK,EAAE;YACxB,oBAAoB;QACtB;IACF;IAEA,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QAExB,8BAA8B;QAC9B,aAAa,UAAU,CAAC;QAExB,OAAO,IAAI,CAAC;QACZ,OAAO,QAAQ,CAAC,MAAM,IAAI,iBAAiB;IAC7C;IAGA,MAAM,kBAAkB;QACtB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,EAAE,UAAU,EAAE,GAAG;QACvB,IAAI,YAAY;YACd,OAAO,WAAW,MAAM,CAAC,GAAG,WAAW;QACzC;QACA,OAAO;IACT;IAEA,MAAM,qBAAqB;QACzB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG;QAClC,IAAI,cAAc,WAAW;YAC3B,OAAO,GAAG,WAAW,CAAC,EAAE,WAAW;QACrC,OAAO,IAAI,YAAY;YACrB,OAAO;QACT,OAAO,IAAI,WAAW;YACpB,OAAO;QACT;QACA,OAAO,KAAK,KAAK,IAAI;IACvB;IAEA,qBACE;;0BAEE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BACC,WAAU;4BACV,SAAS,IAAM,oBAAoB,CAAC;4BACpC,cAAW;sCAEV,iCAAmB,6LAAC,wJAAG;gCAAC,MAAM;;;;;yFAAS,6LAAC,2JAAM;gCAAC,MAAM;;;;;;;;;;;sCAGxD,6LAAC;4BAAG,WAAU;sCACX,aAAa,UAAU,oBAAoB;;;;;;sCAG9C,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;;wCAAe;wCAAU;;;;;;;8CACzC,6LAAC;oCAAI,WAAU;8CAAe;;;;;;;;;;;;;;;;;;;;;;;YAMnC,kCACC,6LAAC;gBACC,WAAU;gBACV,SAAS,IAAM,oBAAoB;;;;;;0BAKvC,6LAAC;gBAAI,WAAW,CAAC,QAAQ,EAAE,mBAAmB,gBAAgB,IAAI;;kCAChE,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,0KAAI;4BAAC,MAAK;sCACT,cAAA,6LAAC;gCACC,KAAI;gCACJ,KAAI;gCACJ,WAAU;;;;;;;;;;;;;;;;kCAKhB,6LAAC;wBAAI,WAAU;kCACZ,aAAa,GAAG,CAAC,CAAA,qBAChB,6LAAC;gCAEC,WAAW,CAAC,aAAa,EAAE,kBAAkB,KAAK,EAAE,GAAG,WAAW,IAAI;gCACtE,SAAS,IAAM,iBAAiB;;kDAEhC,6LAAC,KAAK,IAAI;wCAAC,WAAU;;;;;;kDACrB,6LAAC;kDAAM,KAAK,KAAK;;;;;;;+BALZ,KAAK,EAAE;;;;;;;;;;kCAUlB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;4BAA2B,SAAS;;8CACjD,6LAAC,6JAAQ;oCAAC,WAAU;;;;;;8CACpB,6LAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;AAMlB;GA1KM;;QAEW,kJAAS;QACP,oJAAW;;;KAHxB;uCA4KS"}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/hooks/useIoTKitVerification.tsx"],"sourcesContent":["// hooks/useIoTKitVerification.js\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst API_BASE_URL = \"https://mycomatrix.in/api\";\r\n\r\n// Define IoT controller product IDs based on your database\r\nconst IOT_CONTROLLER_PRODUCT_IDS = [4, 5, 6]; // IOT CONTROLLER products\r\n\r\nexport const useIoTKitVerification = (token) => {\r\n  const [hasIoTKit, setHasIoTKit] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [userOrders, setUserOrders] = useState([]);\r\n\r\n  const checkIoTKitPurchase = async () => {\r\n    if (!token) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      \r\n      console.log('ðŸŽ¯ Checking for IoT Controller Product IDs:', IOT_CONTROLLER_PRODUCT_IDS);\r\n\r\n      const response = await axios.get(`${API_BASE_URL}/orders/my-orders/`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n\r\n      console.log('ðŸ“¦ Orders API Response:', response.data);\r\n\r\n      // âœ… FIXED: Handle array response directly\r\n      let orders = [];\r\n      \r\n      if (Array.isArray(response.data)) {\r\n        orders = response.data;\r\n      } else if (response.data.orders && Array.isArray(response.data.orders)) {\r\n        orders = response.data.orders;\r\n      } else if (response.data.success && response.data.orders) {\r\n        orders = response.data.orders;\r\n      } else {\r\n        orders = [];\r\n      }\r\n\r\n      setUserOrders(orders);\r\n      \r\n      // âœ… FIXED: Check for IoT controller products in the CORRECT structure\r\n      const hasPurchasedIoTKit = orders.some(order => {\r\n        // Only check COMPLETED and PAID orders\r\n        if (order.status !== 'completed' || order.payment_status !== 'paid') {\r\n          return false;\r\n        }\r\n\r\n        // Check items array (this is the correct structure from your API)\r\n        if (order.items && Array.isArray(order.items)) {\r\n          const hasIoTProduct = order.items.some(item => {\r\n            const productId = item.product?.id;\r\n            console.log(`ðŸ” Checking item:`, { \r\n              productId, \r\n              productName: item.product?.name,\r\n              isIoT: IOT_CONTROLLER_PRODUCT_IDS.includes(productId)\r\n            });\r\n            return IOT_CONTROLLER_PRODUCT_IDS.includes(productId);\r\n          });\r\n          \r\n          if (hasIoTProduct) {\r\n            console.log(`âœ… Found IoT product in order ${order.id}`);\r\n          }\r\n          return hasIoTProduct;\r\n        }\r\n        \r\n        return false;\r\n      });\r\n      \r\n      console.log('ðŸ” IoT Controller Purchase Status:', hasPurchasedIoTKit);\r\n      console.log('ðŸ“Š Processed Orders:', orders);\r\n      setHasIoTKit(hasPurchasedIoTKit);\r\n      \r\n      // Debug: Log which IoT products were found\r\n      if (hasPurchasedIoTKit) {\r\n        orders.forEach(order => {\r\n          if (order.items && Array.isArray(order.items)) {\r\n            order.items.forEach(item => {\r\n              const productId = item.product?.id;\r\n              if (IOT_CONTROLLER_PRODUCT_IDS.includes(productId)) {\r\n                console.log(`âœ… Found IoT Controller Purchase:`, {\r\n                  orderId: order.id,\r\n                  productId: productId,\r\n                  productName: item.product?.name,\r\n                  status: order.status,\r\n                  payment_status: order.payment_status\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        console.log('âŒ No IoT Controller purchases found in orders');\r\n        console.log('ðŸ” Checking order structures:');\r\n        orders.forEach(order => {\r\n          console.log(`Order ${order.id}:`, {\r\n            status: order.status,\r\n            payment_status: order.payment_status,\r\n            items: order.items?.map(item => ({\r\n              productId: item.product?.id,\r\n              productName: item.product?.name\r\n            }))\r\n          });\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Error checking IoT kit purchase:', error);\r\n      setError('Failed to verify IoT kit purchase: ' + (error.response?.data?.message || error.message));\r\n      setHasIoTKit(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkIoTKitPurchase();\r\n  }, [token]);\r\n\r\n  return { \r\n    hasIoTKit, \r\n    loading, \r\n    error, \r\n    userOrders,\r\n    iotProductIds: IOT_CONTROLLER_PRODUCT_IDS,\r\n    refetch: checkIoTKitPurchase \r\n  };\r\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 519, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/pages/IoTMonitoring.tsx"],"sourcesContent":["\"use client\";\r\n// components/IoTMonitoring.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Container, Row, Col, Card, Badge, ProgressBar, Button, Alert, Modal, Form, Spinner } from 'react-bootstrap';\r\nimport { FiThermometer, FiDroplet, FiHome, FiMonitor, FiX, FiRefreshCw } from 'react-icons/fi';\r\nimport Sidebar from '../Sidebar';\r\nimport axios from 'axios';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport { useIoTKitVerification } from '../../hooks/useIoTKitVerification';\r\n\r\nconst API_BASE_URL = \"https://mycomatrix.in/api\";\r\n\r\nconst IoTMonitoring = ({ userRole = 'admin' }) => {\r\n  const router = useRouter();\r\n  const { isAuthenticated, user, token, loading: authLoading } = useAuth();\r\n\r\n  const { hasIoTKit, loading: verificationLoading, error: verificationError, userOrders } = useIoTKitVerification(token);\r\n\r\n  const [activeSection, setActiveSection] = useState('iot-monitoring');\r\n  const [showAddRoomModal, setShowAddRoomModal] = useState(false);\r\n  const [rooms, setRooms] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshLoading, setRefreshLoading] = useState(false);\r\n\r\n  const [totalStats, setTotalStats] = useState({\r\n    totalRooms: 0,\r\n    totalSensors: 0,\r\n  });\r\n\r\n  const [newRoom, setNewRoom] = useState({\r\n    name: '',\r\n    kit_id: ''\r\n  });\r\n\r\n  const [formError, setFormError] = useState('');\r\n  const [formSuccess, setFormSuccess] = useState('');\r\n\r\n  // âœ… NEW: Check if user has rooms directly from API (bypass IoT kit verification)\r\n  const [hasRoomsDirect, setHasRoomsDirect] = useState(false);\r\n\r\n  console.log('ðŸ” IoT Kit Verification Status:', {\r\n    hasIoTKit,\r\n    verificationLoading,\r\n    verificationError,\r\n    user: user?.id,\r\n    isAuthenticated\r\n  });\r\n\r\n  const getAuthHeaders = () => {\r\n    return {\r\n      'Authorization': `Bearer ${token}`,\r\n      'Content-Type': 'application/json'\r\n    };\r\n  };\r\n\r\n  // âœ… Fetch rooms from backend with authentication\r\n  const fetchRooms = async () => {\r\n    if (!isAuthenticated || !token) {\r\n      console.log('User not authenticated, redirecting to login');\r\n      router.push('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      console.log('Fetching rooms with sensor data...');\r\n\r\n      const response = await axios.get(`${API_BASE_URL}/rooms/my-rooms/`, {\r\n        headers: getAuthHeaders()\r\n      });\r\n\r\n      console.log('âœ… Rooms with sensor data:', response.data);\r\n\r\n      if (response.data.success) {\r\n        const roomsWithData = response.data.rooms;\r\n        setRooms(roomsWithData);\r\n\r\n        // âœ… NEW: Set hasRoomsDirect based on actual rooms data\r\n        setHasRoomsDirect(roomsWithData.length > 0);\r\n\r\n        const roomsWithSensors = roomsWithData.filter(room => room.latest_sensor_data);\r\n\r\n        setTotalStats({\r\n          totalRooms: roomsWithData.length,\r\n          totalSensors: roomsWithSensors.length * 2,\r\n        });\r\n\r\n        return roomsWithData;\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching rooms:\", error);\r\n      if (error.response?.status === 401) {\r\n        console.log('Token expired, redirecting to login');\r\n        router.push('/login');\r\n      } else if (error.response?.status === 403) {\r\n        setFormError('You do not have permission to access rooms');\r\n      } else {\r\n        setFormError('Failed to fetch rooms. Please try again.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // âœ… Simple refresh function\r\n  const handleRefresh = async () => {\r\n    setRefreshLoading(true);\r\n    await fetchRooms();\r\n    setRefreshLoading(false);\r\n    setFormSuccess('Rooms refreshed successfully!');\r\n    setTimeout(() => setFormSuccess(''), 3000);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // âœ… UPDATED: Fetch rooms regardless of IoT kit verification\r\n    // This allows users with existing rooms to access their data\r\n    if (!verificationLoading) {\r\n      console.log('Fetching rooms...');\r\n      fetchRooms();\r\n    }\r\n  }, [verificationLoading]);\r\n\r\n  // âœ… Handle Add Room with authentication\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNewRoom({ ...newRoom, [name]: value });\r\n  };\r\n\r\n  const handleAddRoom = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!isAuthenticated || !token) {\r\n      setFormError('Authentication required. Please login again.');\r\n      setTimeout(() => {\r\n        router.push('/login');\r\n      }, 2000);\r\n      return;\r\n    }\r\n\r\n    if (!newRoom.name) {\r\n      setFormError('Room name is required');\r\n      return;\r\n    }\r\n\r\n    if (!newRoom.kit_id) {\r\n      setFormError('Kit ID is required');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const roomData = {\r\n        name: newRoom.name,\r\n        kit_id: newRoom.kit_id\r\n      };\r\n\r\n      console.log('ðŸš€ Sending room data to backend:', roomData);\r\n\r\n      const response = await axios.post(`${API_BASE_URL}/rooms/create/`, roomData, {\r\n        headers: getAuthHeaders()\r\n      });\r\n\r\n      console.log('âœ… Room added successfully:', response.data);\r\n      setFormSuccess('Room added successfully!');\r\n      setFormError('');\r\n\r\n      // Reset form\r\n      setNewRoom({\r\n        name: '',\r\n        kit_id: ''\r\n      });\r\n\r\n      setTimeout(() => {\r\n        setShowAddRoomModal(false);\r\n        setFormSuccess('');\r\n        // Refresh rooms after adding new room\r\n        fetchRooms();\r\n      }, 1000);\r\n    } catch (error) {\r\n      console.error('âŒ Error adding room:', error);\r\n      if (error.response?.status === 401) {\r\n        setFormError('Session expired. Please login again.');\r\n        setTimeout(() => {\r\n          router.push('/login');\r\n        }, 2000);\r\n      } else if (error.response?.data?.error) {\r\n        setFormError(error.response.data.error);\r\n      } else if (error.response?.data) {\r\n        setFormError(error.response.data.message || 'Failed to add room');\r\n      } else {\r\n        setFormError('Failed to add room. Please try again.');\r\n      }\r\n    }\r\n  };\r\n\r\n  // âœ… Delete Room with authentication\r\n  const handleDeleteRoom = async (roomId) => {\r\n    if (!window.confirm('Are you sure you want to delete this room?')) return;\r\n\r\n    if (!isAuthenticated || !token) {\r\n      alert('Authentication required. Please login again.');\r\n      router.push('/login');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log('Deleting room:', roomId);\r\n      await axios.delete(`${API_BASE_URL}/rooms/delete/${roomId}/`, {\r\n        headers: getAuthHeaders()\r\n      });\r\n      console.log('Room deleted successfully');\r\n      // Refresh rooms after deletion\r\n      fetchRooms();\r\n    } catch (error) {\r\n      console.error('Error deleting room:', error);\r\n      if (error.response?.status === 401) {\r\n        alert('Session expired. Please login again.');\r\n        router.push('/login');\r\n      } else {\r\n        alert(error.response?.data?.message || 'Failed to delete room');\r\n      }\r\n    }\r\n  };\r\n\r\n  // âœ… Handle Room Card Click\r\n  const handleRoomClick = (room) => {\r\n    if (typeof window !== 'undefined') {\r\n      sessionStorage.setItem('roomData', JSON.stringify(room));\r\n    }\r\n    router.push(`/room/${room.id}`);\r\n  };\r\n\r\n  const getStatusBadge = (sensorData) => {\r\n    if (!sensorData) {\r\n      return { variant: 'secondary', text: 'No Data' };\r\n    }\r\n\r\n    const temp = sensorData.temperature;\r\n    const humidity = sensorData.humidity;\r\n\r\n    const isTempOptimal = temp >= 22 && temp <= 26;\r\n    const isHumidityOptimal = humidity >= 75 && humidity <= 85;\r\n\r\n    if (isTempOptimal && isHumidityOptimal) {\r\n      return { variant: 'success', text: 'Optimal' };\r\n    }\r\n\r\n    const isTempCritical = temp < 17 || temp > 31;\r\n    const isHumidityCritical = humidity < 70 || humidity > 90;\r\n\r\n    if (isTempCritical || isHumidityCritical) {\r\n      return { variant: 'danger', text: 'Critical' };\r\n    }\r\n\r\n    return { variant: 'warning', text: 'Warning' };\r\n  };\r\n\r\n  const getProgressVariant = (value, min, max) => {\r\n    if (!value) return 'secondary';\r\n    if (value >= min && value <= max) return 'success';\r\n    if (value < min - 5 || value > max + 5) return 'danger';\r\n    return 'warning';\r\n  };\r\n\r\n  // Show loading while checking authentication and IoT verification\r\n  if (authLoading || verificationLoading) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n        <Spinner animation=\"border\" variant=\"primary\" />\r\n        <span className=\"ms-2\">Verifying IoT access...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Redirect if not authenticated\r\n  if (!isAuthenticated) {\r\n    router.push('/login');\r\n    return null;\r\n  }\r\n\r\n  // âœ… UPDATED: Show purchase prompt ONLY if user doesn't have IoT kit AND doesn't have any rooms\r\n  if (!hasIoTKit && !hasRoomsDirect && !verificationLoading && !loading) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} userRole={userRole} />\r\n        <div className=\"main-content\">\r\n          <div className=\"dashboard-content\">\r\n            <Container>\r\n              <Row className=\"justify-content-start\">\r\n                <Col md={12} lg={12}>\r\n                  <Card className=\"border-0 shadow-sm py-5\">\r\n                    <Card.Body>\r\n                      <h3 className=\"text-warning mb-3\">IoT Controller Required</h3>\r\n                      <p className=\"text-muted mb-4\">\r\n                        You need to purchase an IoT Controller to access real-time monitoring features.\r\n                        Our IoT controllers provide accurate temperature, humidity, and environmental monitoring for optimal mushroom growth.\r\n                      </p>\r\n\r\n                      <div className=\"mb-4\">\r\n                        <h5>Available IoT Controllers:</h5>\r\n                        <ul className=\"list-unstyled text-start\">\r\n                          <li>âœ… <strong>IOT CONTROLLER FOR (TEMPERATURE,HUMIDITY)</strong> - Basic monitoring</li>\r\n                          <li>âœ… <strong>IOT CONTROLLER (TEMPERATURE,HUMIDITY,CO2)</strong> - Advanced monitoring</li>\r\n                          <li>âœ… <strong>HUMIDIFIER</strong> - Climate control</li>\r\n                        </ul>\r\n                      </div>\r\n\r\n                      <div className=\"mb-4 p-3 bg-light rounded\">\r\n                        <h6>Why IoT Monitoring?</h6>\r\n                        <small className=\"text-muted\">\r\n                          â€¢ Real-time temperature & humidity tracking<br />\r\n                          â€¢ Automated climate control<br />\r\n                          â€¢ Historical data analysis<br />\r\n                          â€¢ Mobile alerts and notifications<br />\r\n                          â€¢ Optimal growth condition maintenance\r\n                        </small>\r\n                      </div>\r\n\r\n                      {verificationError && (\r\n                        <div className=\"alert alert-warning mb-3\">\r\n                          <small>Verification issue: {verificationError}</small>\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"d-flex gap-3 justify-content-start\">\r\n                        <Button\r\n                          onClick={() => router.push('/products')}\r\n                          className=\"button\"\r\n                        >\r\n                          Buy IoT Controller Now\r\n                        </Button>\r\n                      </div>\r\n                    </Card.Body>\r\n                  </Card>\r\n                </Col>\r\n              </Row>\r\n            </Container>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show error state\r\n  if (verificationError && !hasIoTKit && !hasRoomsDirect) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} userRole={userRole} />\r\n        <div className=\"main-content\">\r\n          <div className=\"dashboard-content\">\r\n            <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n              <div className=\"text-center\">\r\n                <div className=\"text-danger mb-3\">\r\n                  <i className=\"fas fa-exclamation-triangle\" style={{ fontSize: '3rem' }}></i>\r\n                </div>\r\n                <h4>Verification Failed</h4>\r\n                <p className=\"text-muted mb-3\">{verificationError}</p>\r\n                <Button variant=\"primary\" onClick={() => window.location.reload()}>\r\n                  Retry\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show loading while fetching rooms\r\n  if (loading) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} userRole={userRole} />\r\n        <div className=\"main-content\">\r\n          <div className=\"dashboard-content\">\r\n            <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n              <Spinner animation=\"border\" variant=\"primary\" />\r\n              <span className=\"ms-2\">Loading rooms...</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // âœ… UPDATED: MAIN IOT MONITORING CONTENT \r\n  // Now shown if user has IoT kit OR has existing rooms\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} userRole={userRole} />\r\n\r\n      <div className=\"main-content\">\r\n        <div className=\"dashboard-content\">\r\n          <div className='mb-4'>\r\n            <div className=\"d-flex justify-content-between align-items-start\">\r\n              <div>\r\n                <h2 className=\"mb-1\">IoT Monitoring</h2>\r\n                <p className=\"text-muted mb-0\">Real-time monitoring of all mushroom growing rooms</p>\r\n                <small className=\"text-info\">Welcome, {user?.name || user?.email}!</small>\r\n                {/* âœ… NEW: Show access type */}\r\n                {hasRoomsDirect && !hasIoTKit && (\r\n                  <small className=\"text-warning d-block\">\r\n                    ðŸ”„ Accessing existing rooms (IoT kit verification pending)\r\n                  </small>\r\n                )}\r\n              </div>\r\n              <Button\r\n                variant=\"outline-primary\"\r\n                size=\"sm\"\r\n                onClick={handleRefresh}\r\n                disabled={refreshLoading}\r\n                className=\"d-flex align-items-center gap-1\"\r\n              >\r\n                <FiRefreshCw className={refreshLoading ? 'spinner' : ''} />\r\n                {refreshLoading ? 'Refreshing...' : 'Refresh Data'}\r\n              </Button>\r\n            </div>\r\n            <div className=\"mt-2\">\r\n              <Badge bg=\"info\" className=\"me-2\">\r\n                Rooms: {totalStats.totalRooms}\r\n              </Badge>\r\n              <Badge bg=\"success\" className=\"me-2\">\r\n                Sensors: {totalStats.totalSensors}\r\n              </Badge>\r\n              <small className=\"text-muted\">\r\n                Data updates automatically from IoT devices â€¢ Click refresh to get latest data\r\n              </small>\r\n            </div>\r\n          </div>\r\n\r\n          {formError && (\r\n            <Alert variant=\"danger\" className=\"mb-3\">\r\n              {formError}\r\n            </Alert>\r\n          )}\r\n\r\n          {formSuccess && (\r\n            <Alert variant=\"success\" className=\"mb-3\">\r\n              {formSuccess}\r\n            </Alert>\r\n          )}\r\n\r\n          {/* Stats Overview */}\r\n          <Row className=\"mb-4\">\r\n            <Col md={3}>\r\n              <Card className=\"border-0 shadow-sm text-center py-4\">\r\n                <Card.Body>\r\n                  <div className=\"text-primary mb-3\"><FiHome size={32} /></div>\r\n                  <div className=\"h3 text-primary mb-0\">{totalStats.totalRooms}</div>\r\n                  <div className=\"text-muted\">Total Rooms</div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col md={3}>\r\n              <Card className=\"border-0 shadow-sm text-center py-4\">\r\n                <Card.Body>\r\n                  <div className=\"text-success mb-3\"><FiMonitor size={32} /></div>\r\n                  <div className=\"h3 text-success mb-0\">{totalStats.totalSensors}</div>\r\n                  <div className=\"text-muted\">Active Sensors</div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n\r\n          <div className='d-flex gap-4 mb-4 justify-content-between align-items-center'>\r\n            <h3>Our Rooms</h3>\r\n            <div className=\"d-flex gap-2\">\r\n              <button className='button' onClick={() => setShowAddRoomModal(true)}>Add Room</button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Room Cards */}\r\n          <Row>\r\n            {rooms.length === 0 ? (\r\n              <Col className=\"text-center py-5\">\r\n                <p className=\"text-muted\">No rooms found. Add your first room to get started.</p>\r\n              </Col>\r\n            ) : (\r\n              rooms.map(roomData => {\r\n                const room = roomData.room;\r\n                const sensorData = roomData.latest_sensor_data;\r\n                const currentTemp = sensorData?.temperature || room.temperature;\r\n                const currentHumidity = sensorData?.humidity || room.humidity;\r\n\r\n                return (\r\n                  <Col lg={4} md={6} className=\"mb-4\" key={room.id}>\r\n                    <Card\r\n                      className=\"h-100 border-0 shadow-sm position-relative cursor-pointer\"\r\n                      onClick={() => handleRoomClick(room)}\r\n                      style={{\r\n                        cursor: 'pointer',\r\n                        transition: 'transform 0.2s, box-shadow 0.2s'\r\n                      }}\r\n                      onMouseEnter={(e) => {\r\n                        e.currentTarget.style.transform = 'translateY(-5px)';\r\n                        e.currentTarget.style.boxShadow = '0 8px 25px rgba(0,0,0,0.15)';\r\n                      }}\r\n                      onMouseLeave={(e) => {\r\n                        e.currentTarget.style.transform = 'translateY(0)';\r\n                        e.currentTarget.style.boxShadow = '';\r\n                      }}\r\n                    >\r\n                      <FiX\r\n                        className=\"position-absolute top-0 end-0 m-2 text-danger cursor-pointer\"\r\n                        size={20}\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleDeleteRoom(room.id);\r\n                        }}\r\n                        title=\"Delete Room\"\r\n                        style={{\r\n                          cursor: 'pointer',\r\n                          zIndex: 10,\r\n                          backgroundColor: 'white',\r\n                          borderRadius: '50%',\r\n                          padding: '2px'\r\n                        }}\r\n                      />\r\n                      <Card.Header className=\"bg-white border-bottom-0\">\r\n                        <div className=\"d-flex justify-content-between align-items-center\">\r\n                          <h6 className=\"mb-0 fw-bold\">{room.name}</h6>\r\n                          <Badge bg={getStatusBadge(sensorData).variant} className=\"px-3 py-2\">\r\n                            {getStatusBadge(sensorData).text}\r\n                          </Badge>\r\n                        </div>\r\n                        <small className=\"text-muted\">Kit ID: {room.kit_id}</small>\r\n                      </Card.Header>\r\n                      <Card.Body>\r\n                        {/* Temperature */}\r\n                        <div className=\"sensor-metric mb-3\">\r\n                          <div className=\"d-flex justify-content-between mb-1\">\r\n                            <span><FiThermometer className=\"me-2 text-danger\" />Temp</span>\r\n                            <span>{currentTemp ? `${currentTemp}Â°C` : '--'}</span>\r\n                          </div>\r\n                          <ProgressBar\r\n                            now={currentTemp ? (currentTemp / 30) * 100 : 0}\r\n                            variant={getProgressVariant(currentTemp, 22, 26)}\r\n                          />\r\n                          <small className=\"text-muted\">Optimal: 22-26Â°C</small>\r\n                        </div>\r\n\r\n                        {/* Humidity */}\r\n                        <div className=\"sensor-metric\">\r\n                          <div className=\"d-flex justify-content-between mb-1\">\r\n                            <span><FiDroplet className=\"me-2 text-info\" />Humidity</span>\r\n                            <span>{currentHumidity ? `${currentHumidity}%` : '--'}</span>\r\n                          </div>\r\n                          <ProgressBar\r\n                            now={currentHumidity || 0}\r\n                            variant={getProgressVariant(currentHumidity, 75, 85)}\r\n                          />\r\n                          <small className=\"text-muted\">Optimal: 75-85%</small>\r\n                        </div>\r\n\r\n                        {/* Last Updated */}\r\n                        {sensorData && (\r\n                          <div className=\"mt-3 pt-2 border-top\">\r\n                            <small className=\"text-muted\">\r\n                              Last updated: {new Date(sensorData.timestamp).toLocaleTimeString()}\r\n                            </small>\r\n                          </div>\r\n                        )}\r\n                      </Card.Body>\r\n                    </Card>\r\n                  </Col>\r\n                );\r\n              })\r\n            )}\r\n          </Row>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Add Room Modal */}\r\n      <Modal show={showAddRoomModal} onHide={() => setShowAddRoomModal(false)} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Add New Room</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          {formError && <Alert variant=\"danger\">{formError}</Alert>}\r\n          {formSuccess && <Alert variant=\"success\">{formSuccess}</Alert>}\r\n\r\n          <Form onSubmit={handleAddRoom}>\r\n            <Form.Group controlId=\"kitId\" className=\"mb-3\">\r\n              <Form.Label>Kit ID *</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"Enter Kit ID\"\r\n                name=\"kit_id\"\r\n                value={newRoom.kit_id}\r\n                onChange={handleInputChange}\r\n                className='px-2'\r\n                required\r\n              />\r\n            </Form.Group>\r\n            <Form.Group controlId=\"roomName\" className=\"mb-3\">\r\n              <Form.Label>Room Name *</Form.Label>\r\n              <Form.Control\r\n                type=\"text\"\r\n                placeholder=\"Enter room name\"\r\n                name=\"name\"\r\n                value={newRoom.name}\r\n                onChange={handleInputChange}\r\n                className='px-2'\r\n                required\r\n              />\r\n            </Form.Group>\r\n            <div className=\"d-flex justify-content-end gap-2\">\r\n              <Button variant=\"secondary\" className='text-white' onClick={() => setShowAddRoomModal(false)}>Cancel</Button>\r\n              <Button type=\"submit\" className='button'>Add Room</Button>\r\n            </div>\r\n          </Form>\r\n        </Modal.Body>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IoTMonitoring;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1965, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/Layout.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react';\r\nimport Sidebar from './Sidebar';\r\n\r\nconst Layout = ({ children, activeSection, setActiveSection, userRole }) => {\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} userRole={userRole} />\r\n      <div className=\"main-content\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,SAAS,CAAC,EAAE,QAAQ,EAAE,aAAa,EAAE,gBAAgB,EAAE,QAAQ,EAAE;IACrE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2IAAO;gBAAC,eAAe;gBAAe,kBAAkB;gBAAkB,UAAU;;;;;;0BACrF,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;KATM;uCAWS"}},
    {"offset": {"line": 2013, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\n// src/components/ProtectedRoute.js\r\nimport React, { useEffect } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  const { isAuthenticated, loading, user } = useAuth();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    console.log('ProtectedRoute - Auth state:', {\r\n      isAuthenticated,\r\n      loading,\r\n      hasToken: typeof window !== 'undefined' ? !!localStorage.getItem('access_token') : false,\r\n      user: user ? 'User exists' : 'No user',\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }, [isAuthenticated, loading, user]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && !isAuthenticated) {\r\n      console.log('ProtectedRoute - Not authenticated, redirecting to login');\r\n      if (pathname !== '/login') {\r\n        localStorage.setItem('redirectAfterLogin', pathname);\r\n      }\r\n      router.push('/login');\r\n    }\r\n  }, [loading, isAuthenticated, pathname, router]);\r\n\r\n  if (loading) {\r\n    console.log('ProtectedRoute - Loading authentication state...');\r\n    return <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n      <div className=\"spinner-border text-primary\" role=\"status\">\r\n        <span className=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return null; // Don't render anything while redirecting\r\n  }\r\n\r\n  console.log('ProtectedRoute - User authenticated, rendering children');\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"names":[],"mappings":";;;;;AACA,mCAAmC;AACnC;AACA;AACA;;;AAJA;;;;AAMA,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAE;;IAClC,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,4IAAO;IAClD,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAE5B,IAAA,0KAAS;oCAAC;YACR,QAAQ,GAAG,CAAC,gCAAgC;gBAC1C;gBACA;gBACA,UAAU,uCAAgC,CAAC,CAAC,aAAa,OAAO,CAAC,kBAAkB;gBACnF,MAAM,OAAO,gBAAgB;gBAC7B,WAAW,IAAI,OAAO,WAAW;YACnC;QACF;mCAAG;QAAC;QAAiB;QAAS;KAAK;IAEnC,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,WAAW,CAAC,iBAAiB;gBAChC,QAAQ,GAAG,CAAC;gBACZ,IAAI,aAAa,UAAU;oBACzB,aAAa,OAAO,CAAC,sBAAsB;gBAC7C;gBACA,OAAO,IAAI,CAAC;YACd;QACF;mCAAG;QAAC;QAAS;QAAiB;QAAU;KAAO;IAE/C,IAAI,SAAS;QACX,QAAQ,GAAG,CAAC;QACZ,qBAAO,6LAAC;YAAI,WAAU;sBACpB,cAAA,6LAAC;gBAAI,WAAU;gBAA8B,MAAK;0BAChD,cAAA,6LAAC;oBAAK,WAAU;8BAAkB;;;;;;;;;;;;;;;;IAGxC;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO,MAAM,0CAA0C;IACzD;IAEA,QAAQ,GAAG,CAAC;IACZ,OAAO;AACT;GAxCM;;QACuC,4IAAO;QACnC,kJAAS;QACP,oJAAW;;;KAHxB;uCA0CS"}},
    {"offset": {"line": 2114, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/app/user/iot-monitoring/page.tsx"],"sourcesContent":["\"use client\";\r\nimport IoTMonitoring from '../../../components/pages/IoTMonitoring';\r\nimport Layout from '../../../components/Layout';\r\nimport ProtectedRoute from '../../../components/ProtectedRoute';\r\n\r\nexport default function UserIoTMonitoringPage() {\r\n    return (\r\n        <ProtectedRoute>\r\n            <Layout activeSection=\"iot-monitoring\" setActiveSection={() => { }} userRole=\"user\">\r\n                <IoTMonitoring userRole=\"user\" />\r\n            </Layout>\r\n        </ProtectedRoute>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACpB,qBACI,6LAAC,kJAAc;kBACX,cAAA,6LAAC,0IAAM;YAAC,eAAc;YAAiB,kBAAkB,KAAQ;YAAG,UAAS;sBACzE,cAAA,6LAAC,0JAAa;gBAAC,UAAS;;;;;;;;;;;;;;;;AAIxC;KARwB"}}]
}