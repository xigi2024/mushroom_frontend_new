{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { FiHome, FiMonitor, FiPackage, FiUser, FiSettings, FiCreditCard, FiLogOut, FiMenu, FiX } from 'react-icons/fi';\r\nimport './styles/sidebar.css';\r\nimport Link from 'next/link';\r\n\r\n\r\nconst Sidebar = ({ activeSection, setActiveSection }) => {\r\n  const [userRole, setUserRole] = useState(\"user\");\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [user, setUser] = useState(null);\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem('user');\r\n    if (userData) {\r\n      setUser(JSON.parse(userData));\r\n      setUserRole(JSON.parse(userData)?.role?.toLowerCase() || \"user\");\r\n    }\r\n  }, []);\r\n\r\n  const adminSidebarItems = [\r\n    { id: 'dashboard', icon: FiHome, label: 'Admin Dashboard', path: '/admin-dashboard' },\r\n    { id: 'iot-monitoring', icon: FiMonitor, label: 'IoT Monitoring', path: '/admin/iot-monitoring' },\r\n    { id: 'products', icon: FiPackage, label: 'Products Order', path: '/admin/product-order' },\r\n    { id: 'accounts', icon: FiUser, label: 'Accounts', path: '/accounts' },\r\n    //{ id: 'settings', icon: FiSettings, label: 'Settings', path: '/settings' },\r\n    { id: 'payment', icon: FiCreditCard, label: 'Payment History', path: '/payment-history' }\r\n  ];\r\n\r\n  const userSidebarItems = [\r\n    { id: 'dashboard', icon: FiHome, label: 'User Dashboard', path: '/user-dashboard' },\r\n    { id: 'iot-monitoring', icon: FiMonitor, label: 'IoT Monitoring', path: '/user/iot-monitoring' },\r\n    { id: 'products', icon: FiPackage, label: 'Products Order', path: '/user/product-order' },\r\n    { id: 'profile', icon: FiUser, label: 'My Profile', path: '/profile' },\r\n    { id: 'payment', icon: FiCreditCard, label: 'My Payments', path: '/user-payments' }\r\n  ];\r\n\r\n  const sidebarItems = userRole === 'admin' ? adminSidebarItems : userSidebarItems;\r\n\r\n  // Set active section based on current path\r\n  useEffect(() => {\r\n    const currentItem = sidebarItems.find(item => item.path === pathname);\r\n    if (currentItem) {\r\n      setActiveSection(currentItem.id);\r\n    }\r\n  }, [pathname, sidebarItems, setActiveSection]);\r\n\r\n  // Close mobile menu when route changes\r\n  useEffect(() => {\r\n    setIsMobileMenuOpen(false);\r\n  }, [pathname]);\r\n\r\n  // Prevent body scroll when mobile menu is open\r\n  useEffect(() => {\r\n    if (isMobileMenuOpen) {\r\n      document.body.classList.add('mobile-menu-open');\r\n    } else {\r\n      document.body.classList.remove('mobile-menu-open');\r\n    }\r\n    return () => {\r\n      document.body.classList.remove('mobile-menu-open');\r\n    };\r\n  }, [isMobileMenuOpen]);\r\n\r\n  const handleNavigation = (item) => {\r\n    if (item.path) {\r\n      router.push(item.path);\r\n      setActiveSection(item.id);\r\n      setIsMobileMenuOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('refresh_token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('userRole');\r\n\r\n    // optional: remove guest cart\r\n    localStorage.removeItem('guest_cart');\r\n\r\n    router.push('/login');\r\n    window.location.reload(); // Force UI reset\r\n  };\r\n\r\n\r\n  const getUserInitials = () => {\r\n    if (!user) return 'U';\r\n    const { first_name } = user;\r\n    if (first_name) {\r\n      return first_name.charAt(0).toUpperCase();\r\n    }\r\n    return 'U';\r\n  };\r\n\r\n  const getUserDisplayName = () => {\r\n    if (!user) return 'User';\r\n    const { first_name, last_name } = user;\r\n    if (first_name && last_name) {\r\n      return `${first_name} ${last_name}`;\r\n    } else if (first_name) {\r\n      return first_name;\r\n    } else if (last_name) {\r\n      return last_name;\r\n    }\r\n    return user.email || 'User';\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Topbar */}\r\n      <div className=\"topbar\">\r\n        <div className=\"topbar-content\">\r\n          {/* Hamburger Menu for Mobile */}\r\n          <button\r\n            className=\"mobile-menu-toggle\"\r\n            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n            aria-label=\"Toggle menu\"\r\n          >\r\n            {isMobileMenuOpen ? <FiX size={24} /> : <FiMenu size={24} />}\r\n          </button>\r\n\r\n          <h2 className=\"dashboard-title\">\r\n            {userRole === 'admin' ? 'Admin Dashboard' : 'User Dashboard'}\r\n          </h2>\r\n\r\n          <div className=\"topbar-right\">\r\n            <span className=\"welcome-text\">Welcome, {getUserDisplayName()}</span>\r\n            <div className=\"user-avatar\">{getUserInitials()}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Overlay */}\r\n      {isMobileMenuOpen && (\r\n        <div\r\n          className=\"mobile-overlay\"\r\n          onClick={() => setIsMobileMenuOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <div className={`sidebar ${isMobileMenuOpen ? 'mobile-open' : ''}`}>\r\n        <div className=\"sidebar-header\">\r\n          <Link href=\"/\">\r\n            <img\r\n              src=\"/assets/logo2.png\"\r\n              alt=\"Logo\"\r\n              className=\"img-fluid sidebar-logo\"\r\n            />\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"sidebar-menu\">\r\n          {sidebarItems.map(item => (\r\n            <div\r\n              key={item.id}\r\n              className={`sidebar-item ${activeSection === item.id ? 'active' : ''}`}\r\n              onClick={() => handleNavigation(item)}\r\n            >\r\n              <item.icon className=\"sidebar-icon\" />\r\n              <span>{item.label}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"sidebar-footer\">\r\n          <div className=\"sidebar-item logout-item\" onClick={handleLogout}>\r\n            <FiLogOut className=\"sidebar-icon\" />\r\n            <span>Logout</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAEA;;;AALA;;;;;;AAQA,MAAM,UAAU,CAAC,EAAE,aAAa,EAAE,gBAAgB,EAAE;;IAClD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;IAEzD,IAAA,0KAAS;6BAAC;YACR,MAAM,WAAW,aAAa,OAAO,CAAC;YACtC,IAAI,UAAU;gBACZ,QAAQ,KAAK,KAAK,CAAC;gBACnB,YAAY,KAAK,KAAK,CAAC,WAAW,MAAM,iBAAiB;YAC3D;QACF;4BAAG,EAAE;IAEL,MAAM,oBAAoB;QACxB;YAAE,IAAI;YAAa,MAAM,2JAAM;YAAE,OAAO;YAAmB,MAAM;QAAmB;QACpF;YAAE,IAAI;YAAkB,MAAM,8JAAS;YAAE,OAAO;YAAkB,MAAM;QAAwB;QAChG;YAAE,IAAI;YAAY,MAAM,8JAAS;YAAE,OAAO;YAAkB,MAAM;QAAuB;QACzF;YAAE,IAAI;YAAY,MAAM,2JAAM;YAAE,OAAO;YAAY,MAAM;QAAY;QACrE,6EAA6E;QAC7E;YAAE,IAAI;YAAW,MAAM,iKAAY;YAAE,OAAO;YAAmB,MAAM;QAAmB;KACzF;IAED,MAAM,mBAAmB;QACvB;YAAE,IAAI;YAAa,MAAM,2JAAM;YAAE,OAAO;YAAkB,MAAM;QAAkB;QAClF;YAAE,IAAI;YAAkB,MAAM,8JAAS;YAAE,OAAO;YAAkB,MAAM;QAAuB;QAC/F;YAAE,IAAI;YAAY,MAAM,8JAAS;YAAE,OAAO;YAAkB,MAAM;QAAsB;QACxF;YAAE,IAAI;YAAW,MAAM,2JAAM;YAAE,OAAO;YAAc,MAAM;QAAW;QACrE;YAAE,IAAI;YAAW,MAAM,iKAAY;YAAE,OAAO;YAAe,MAAM;QAAiB;KACnF;IAED,MAAM,eAAe,aAAa,UAAU,oBAAoB;IAEhE,2CAA2C;IAC3C,IAAA,0KAAS;6BAAC;YACR,MAAM,cAAc,aAAa,IAAI;iDAAC,CAAA,OAAQ,KAAK,IAAI,KAAK;;YAC5D,IAAI,aAAa;gBACf,iBAAiB,YAAY,EAAE;YACjC;QACF;4BAAG;QAAC;QAAU;QAAc;KAAiB;IAE7C,uCAAuC;IACvC,IAAA,0KAAS;6BAAC;YACR,oBAAoB;QACtB;4BAAG;QAAC;KAAS;IAEb,+CAA+C;IAC/C,IAAA,0KAAS;6BAAC;YACR,IAAI,kBAAkB;gBACpB,SAAS,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;YAC9B,OAAO;gBACL,SAAS,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YACjC;YACA;qCAAO;oBACL,SAAS,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;gBACjC;;QACF;4BAAG;QAAC;KAAiB;IAErB,MAAM,mBAAmB,CAAC;QACxB,IAAI,KAAK,IAAI,EAAE;YACb,OAAO,IAAI,CAAC,KAAK,IAAI;YACrB,iBAAiB,KAAK,EAAE;YACxB,oBAAoB;QACtB;IACF;IAEA,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QAExB,8BAA8B;QAC9B,aAAa,UAAU,CAAC;QAExB,OAAO,IAAI,CAAC;QACZ,OAAO,QAAQ,CAAC,MAAM,IAAI,iBAAiB;IAC7C;IAGA,MAAM,kBAAkB;QACtB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,EAAE,UAAU,EAAE,GAAG;QACvB,IAAI,YAAY;YACd,OAAO,WAAW,MAAM,CAAC,GAAG,WAAW;QACzC;QACA,OAAO;IACT;IAEA,MAAM,qBAAqB;QACzB,IAAI,CAAC,MAAM,OAAO;QAClB,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG;QAClC,IAAI,cAAc,WAAW;YAC3B,OAAO,GAAG,WAAW,CAAC,EAAE,WAAW;QACrC,OAAO,IAAI,YAAY;YACrB,OAAO;QACT,OAAO,IAAI,WAAW;YACpB,OAAO;QACT;QACA,OAAO,KAAK,KAAK,IAAI;IACvB;IAEA,qBACE;;0BAEE,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BACC,WAAU;4BACV,SAAS,IAAM,oBAAoB,CAAC;4BACpC,cAAW;sCAEV,iCAAmB,6LAAC,wJAAG;gCAAC,MAAM;;;;;yFAAS,6LAAC,2JAAM;gCAAC,MAAM;;;;;;;;;;;sCAGxD,6LAAC;4BAAG,WAAU;sCACX,aAAa,UAAU,oBAAoB;;;;;;sCAG9C,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;;wCAAe;wCAAU;;;;;;;8CACzC,6LAAC;oCAAI,WAAU;8CAAe;;;;;;;;;;;;;;;;;;;;;;;YAMnC,kCACC,6LAAC;gBACC,WAAU;gBACV,SAAS,IAAM,oBAAoB;;;;;;0BAKvC,6LAAC;gBAAI,WAAW,CAAC,QAAQ,EAAE,mBAAmB,gBAAgB,IAAI;;kCAChE,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC,0KAAI;4BAAC,MAAK;sCACT,cAAA,6LAAC;gCACC,KAAI;gCACJ,KAAI;gCACJ,WAAU;;;;;;;;;;;;;;;;kCAKhB,6LAAC;wBAAI,WAAU;kCACZ,aAAa,GAAG,CAAC,CAAA,qBAChB,6LAAC;gCAEC,WAAW,CAAC,aAAa,EAAE,kBAAkB,KAAK,EAAE,GAAG,WAAW,IAAI;gCACtE,SAAS,IAAM,iBAAiB;;kDAEhC,6LAAC,KAAK,IAAI;wCAAC,WAAU;;;;;;kDACrB,6LAAC;kDAAM,KAAK,KAAK;;;;;;;+BALZ,KAAK,EAAE;;;;;;;;;;kCAUlB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;4BAA2B,SAAS;;8CACjD,6LAAC,6JAAQ;oCAAC,WAAU;;;;;;8CACpB,6LAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;AAMlB;GA1KM;;QAEW,kJAAS;QACP,oJAAW;;;KAHxB;uCA4KS"}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/pages/PaymentHistory.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Row, Col, Card, Table, Badge, Button, Form, InputGroup, Spinner, Alert } from 'react-bootstrap';\r\nimport { FiSearch, FiDownload, FiCreditCard, FiCalendar, FiRefreshCw } from 'react-icons/fi';\r\nimport { FaMoneyBillWave } from \"react-icons/fa\";\r\nimport Sidebar from '../Sidebar';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst PaymentHistory = () => {\r\n  const [activeSection, setActiveSection] = useState('payment');\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [payments, setPayments] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const { isAuthenticated, token, user } = useAuth();\r\n\r\n  const fetchAllPayments = async () => {\r\n    if (!isAuthenticated || !token) {\r\n      setError('Please login to view payment history');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      setError('');\r\n      \r\n      console.log('ðŸ” Fetching all payments...');\r\n      const response = await fetch('https://mycomatrix.in/api/payments/all-payments/', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.status === 401) {\r\n        localStorage.removeItem('access_token');\r\n        setError('Session expired. Please login again.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (response.status === 403) {\r\n        setError('Admin access required to view all payments');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('âœ… All payments API response:', data);\r\n      \r\n      if (data.success) {\r\n        setPayments(data.payments || []);\r\n      } else {\r\n        setError(data.error || 'Failed to fetch payment history');\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching payment history:', err);\r\n      setError('Failed to load payment history. Please try again later.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated) {\r\n      fetchAllPayments();\r\n    } else {\r\n      setLoading(false);\r\n      setError('Please login to view payment history');\r\n    }\r\n  }, [isAuthenticated]);\r\n\r\n  const exportToCSV = () => {\r\n    if (payments.length === 0) {\r\n      alert('No payment data to export');\r\n      return;\r\n    }\r\n\r\n    // Create CSV header\r\n    const headers = ['Payment ID', 'Razorpay ID', 'User', 'User Email', 'Order ID', 'Amount (â‚¹)', 'Payment Method', 'Status', 'Date', 'Currency'];\r\n    \r\n    // Create CSV rows\r\n    const csvRows = [\r\n      headers.join(','),\r\n      ...payments.map(payment => \r\n        [\r\n          `\"${payment.id}\"`,\r\n          `\"${payment.razorpay_payment_id || 'N/A'}\"`,\r\n          `\"${payment.user_details?.name || 'N/A'}\"`,\r\n          `\"${payment.user_details?.email || 'N/A'}\"`,\r\n          `\"${payment.order_details?.id || 'N/A'}\"`,\r\n          payment.amount || 0,\r\n          `\"${payment.payment_method || 'razorpay'}\"`,\r\n          `\"${getStatusBadge(payment.status).text}\"`,\r\n          `\"${formatDate(payment.created_at)}\"`,\r\n          `\"${payment.currency || 'INR'}\"`\r\n        ].join(',')\r\n      )\r\n    ];\r\n    \r\n    // Create CSV string\r\n    const csvString = csvRows.join('\\n');\r\n    \r\n    // Create download link\r\n    const blob = new Blob([csvString], { type: 'text/csv;charset=utf-8;' });\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.setAttribute('href', url);\r\n    link.setAttribute('download', `all_payments_${new Date().toISOString().split('T')[0]}.csv`);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const getStatusBadge = (status) => {\r\n    const statusConfig = {\r\n      completed: { variant: 'success', text: 'Completed' },\r\n      captured: { variant: 'success', text: 'Captured' },\r\n      pending: { variant: 'warning', text: 'Pending' },\r\n      failed: { variant: 'danger', text: 'Failed' },\r\n      refunded: { variant: 'info', text: 'Refunded' },\r\n      created: { variant: 'secondary', text: 'Created' }\r\n    };\r\n    return statusConfig[status] || { variant: 'secondary', text: status || 'Unknown' };\r\n  };\r\n\r\n  const getMethodIcon = (method) => {\r\n    return <FiCreditCard className=\"me-2\" />;\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'N/A';\r\n    try {\r\n      const date = new Date(dateString);\r\n      return date.toLocaleDateString('en-IN', {\r\n        year: 'numeric',\r\n        month: 'short',\r\n        day: 'numeric',\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    } catch (e) {\r\n      return dateString;\r\n    }\r\n  };\r\n\r\n  // Filter payments\r\n  const filteredPayments = payments.filter(payment => {\r\n    const paymentId = String(payment.id || '');\r\n    const razorpayId = String(payment.razorpay_payment_id || '');\r\n    const userName = String(payment.user_details?.name || '').toLowerCase();\r\n    const userEmail = String(payment.user_details?.email || '').toLowerCase();\r\n    const orderId = String(payment.order_details?.id || '');\r\n    \r\n    const matchesSearch = \r\n      paymentId.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      razorpayId.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n      userName.includes(searchTerm.toLowerCase()) ||\r\n      userEmail.includes(searchTerm.toLowerCase()) ||\r\n      orderId.includes(searchTerm.toLowerCase());\r\n    \r\n    const matchesFilter = filterStatus === 'all' || payment.status === filterStatus;\r\n    \r\n    return matchesSearch && matchesFilter;\r\n  });\r\n\r\n  // Calculate totals from actual API data\r\n  const totalRevenue = payments\r\n    .filter(p => p.status === 'completed' || p.status === 'captured')\r\n    .reduce((sum, p) => sum + (parseFloat(p.amount) || 0), 0);\r\n  \r\n  const successfulPayments = payments.filter(p => p.status === 'completed' || p.status === 'captured').length;\r\n  const pendingPayments = payments.filter(p => p.status === 'pending' || p.status === 'created').length;\r\n  const totalUsers = [...new Set(payments.map(p => p.user_details?.email).filter(Boolean))].length;\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"dashboard-container\">\r\n        <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} />\r\n        <div className=\"main-content\">\r\n          <div className=\"d-flex justify-content-center align-items-center\" style={{ height: '50vh' }}>\r\n            <Spinner animation=\"border\" variant=\"success\" />\r\n            <span className=\"ms-2\">Loading payment history...</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} />\r\n      \r\n      <div className=\"main-content\">\r\n        <div className=\"dashboard-content\">\r\n          {/* Header */}\r\n          <div className='mb-4'>\r\n            <h2 className=\"mb-1\">Payment History</h2>\r\n            <p className=\"text-muted mb-0\">All payment transactions across all users</p>\r\n          </div>\r\n\r\n          {/* Error Message */}\r\n          {error && (\r\n            <div className=\"alert alert-danger mb-4\" role=\"alert\">\r\n              {error}\r\n              <Button \r\n                variant=\"link\" \r\n                className=\"p-0 ms-2\" \r\n                onClick={fetchAllPayments}\r\n              >\r\n                Try Again\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Revenue Stats */}\r\n          <Row className=\"mb-4\">\r\n            <Col md={3}>\r\n              <Card className=\"border-0 shadow-sm\">\r\n                <Card.Body className=\"text-center py-4\">\r\n                  <div className=\"text-success mb-3\">\r\n                    <FaMoneyBillWave size={32} />\r\n                  </div>\r\n                  <div className=\"h3 text-success mb-0\">â‚¹{totalRevenue.toLocaleString()}</div>\r\n                  <div className=\"text-muted\">Total Revenue</div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col md={3}>\r\n              <Card className=\"border-0 shadow-sm\">\r\n                <Card.Body className=\"text-center py-4\">\r\n                  <div className=\"text-primary mb-3\">\r\n                    <FiCreditCard size={32} />\r\n                  </div>\r\n                  <div className=\"h3 text-primary mb-0\">{successfulPayments}</div>\r\n                  <div className=\"text-muted\">Successful Payments</div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col md={3}>\r\n              <Card className=\"border-0 shadow-sm\">\r\n                <Card.Body className=\"text-center py-4\">\r\n                  <div className=\"text-warning mb-3\">\r\n                    <FiCalendar size={32} />\r\n                  </div>\r\n                  <div className=\"h3 text-warning mb-0\">{pendingPayments}</div>\r\n                  <div className=\"text-muted\">Pending Payments</div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col md={3}>\r\n              <Card className=\"border-0 shadow-sm\">\r\n                <Card.Body className=\"text-center py-4\">\r\n                  <div className=\"text-info mb-3\">\r\n                    <FiCreditCard size={32} />\r\n                  </div>\r\n                  <div className=\"h3 text-info mb-0\">{totalUsers}</div>\r\n                  <div className=\"text-muted\">Unique Users</div>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n\r\n          {/* Payment History Table */}\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Header className=\"bg-white border-bottom d-flex justify-content-between align-items-center\">\r\n              <h6 className=\"mb-0\">\r\n                All Transactions \r\n                <Badge bg=\"secondary\" className=\"ms-2\">\r\n                  {filteredPayments.length} payment{filteredPayments.length !== 1 ? 's' : ''}\r\n                </Badge>\r\n              </h6>\r\n              <div className=\"d-flex gap-2\">\r\n                <Form.Select \r\n                  value={filterStatus} \r\n                  onChange={(e) => setFilterStatus(e.target.value)}\r\n                  style={{ width: '150px' }}\r\n                >\r\n                  <option value=\"all\">All Status</option>\r\n                  <option value=\"completed\">Completed</option>\r\n                  <option value=\"captured\">Captured</option>\r\n                  <option value=\"pending\">Pending</option>\r\n                  <option value=\"failed\">Failed</option>\r\n                </Form.Select>\r\n                <InputGroup style={{ width: '250px' }}>\r\n                  <InputGroup.Text>\r\n                    <FiSearch />\r\n                  </InputGroup.Text>\r\n                  <Form.Control\r\n                    placeholder=\"Search payments...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                  />\r\n                </InputGroup>\r\n                <Button \r\n                  className='border-0 button' \r\n                  onClick={exportToCSV}\r\n                  disabled={payments.length === 0}\r\n                >\r\n                  <FiDownload className=\"me-2\" />\r\n                  Export CSV\r\n                </Button>\r\n                <Button variant=\"outline-success\" onClick={fetchAllPayments}>\r\n                  <FiRefreshCw className=\"me-2\" />\r\n                  Refresh\r\n                </Button>\r\n              </div>\r\n            </Card.Header>\r\n            <Card.Body className=\"p-0\">\r\n              {filteredPayments.length === 0 && payments.length > 0 ? (\r\n                <div className=\"text-center py-5\">\r\n                  <p className=\"text-muted\">No payments match your search criteria</p>\r\n                  <Button variant=\"outline-secondary\" onClick={() => {\r\n                    setSearchTerm('');\r\n                    setFilterStatus('all');\r\n                  }}>\r\n                    Clear Filters\r\n                  </Button>\r\n                </div>\r\n              ) : filteredPayments.length === 0 ? (\r\n                <div className=\"text-center py-5\">\r\n                  <p className=\"text-muted\">No payments found</p>\r\n                  <p className=\"text-muted small\">Payment history will appear here when users make purchases.</p>\r\n                </div>\r\n              ) : (\r\n                <Table responsive className=\"mb-0\">\r\n                  <thead className=\"bg-light\">\r\n                    <tr>\r\n                      <th className=\"border-0 py-3\">Payment ID</th>\r\n                      <th className=\"border-0 py-3\">Razorpay ID</th>\r\n                      <th className=\"border-0 py-3\">User</th>\r\n                      <th className=\"border-0 py-3\">Order ID</th>\r\n                      <th className=\"border-0 py-3\">Amount</th>\r\n                      <th className=\"border-0 py-3\">Method</th>\r\n                      <th className=\"border-0 py-3\">Status</th>\r\n                      <th className=\"border-0 py-3\">Date</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filteredPayments.map((payment) => (\r\n                      <tr key={payment.id}>\r\n                        <td className=\"py-3\">\r\n                          <strong className=\"text-primary\">#{payment.id}</strong>\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          <code className=\"text-muted small\">\r\n                            {payment.razorpay_payment_id || 'N/A'}\r\n                          </code>\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          <div>\r\n                            <div className=\"fw-semibold\">\r\n                              {payment.user_details?.name || 'N/A'}\r\n                            </div>\r\n                            <small className=\"text-muted\">\r\n                              {payment.user_details?.email || 'N/A'}\r\n                            </small>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          {payment.order_details?.id ? (\r\n                            <Badge bg=\"light\" text=\"dark\">\r\n                              Order #{payment.order_details.id}\r\n                            </Badge>\r\n                          ) : (\r\n                            'N/A'\r\n                          )}\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          <div className=\"fw-bold text-success\">\r\n                            â‚¹{(parseFloat(payment.amount) || 0).toLocaleString()}\r\n                          </div>\r\n                          <small className=\"text-muted\">{payment.currency}</small>\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          <div className=\"d-flex align-items-center\">\r\n                            {getMethodIcon(payment.payment_method)}\r\n                            <span className=\"text-capitalize\">\r\n                              {payment.payment_method || 'razorpay'}\r\n                            </span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          <Badge \r\n                            bg={getStatusBadge(payment.status).variant} \r\n                            className=\"px-3 py-2\"\r\n                          >\r\n                            {getStatusBadge(payment.status).text}\r\n                          </Badge>\r\n                        </td>\r\n                        <td className=\"py-3\">\r\n                          <small className=\"text-muted\">\r\n                            {formatDate(payment.created_at)}\r\n                          </small>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </Table>\r\n              )}\r\n            </Card.Body>\r\n          </Card>      \r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PaymentHistory;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1470, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/Layout.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react';\r\nimport Sidebar from './Sidebar';\r\n\r\nconst Layout = ({ children, activeSection, setActiveSection, userRole }) => {\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} userRole={userRole} />\r\n      <div className=\"main-content\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,SAAS,CAAC,EAAE,QAAQ,EAAE,aAAa,EAAE,gBAAgB,EAAE,QAAQ,EAAE;IACrE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2IAAO;gBAAC,eAAe;gBAAe,kBAAkB;gBAAkB,UAAU;;;;;;0BACrF,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;KATM;uCAWS"}},
    {"offset": {"line": 1518, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\n// src/components/ProtectedRoute.js\r\nimport React, { useEffect } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  const { isAuthenticated, loading, user } = useAuth();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    console.log('ProtectedRoute - Auth state:', {\r\n      isAuthenticated,\r\n      loading,\r\n      hasToken: typeof window !== 'undefined' ? !!localStorage.getItem('access_token') : false,\r\n      user: user ? 'User exists' : 'No user',\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }, [isAuthenticated, loading, user]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && !isAuthenticated) {\r\n      console.log('ProtectedRoute - Not authenticated, redirecting to login');\r\n      if (pathname !== '/login') {\r\n        localStorage.setItem('redirectAfterLogin', pathname);\r\n      }\r\n      router.push('/login');\r\n    }\r\n  }, [loading, isAuthenticated, pathname, router]);\r\n\r\n  if (loading) {\r\n    console.log('ProtectedRoute - Loading authentication state...');\r\n    return <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n      <div className=\"spinner-border text-primary\" role=\"status\">\r\n        <span className=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return null; // Don't render anything while redirecting\r\n  }\r\n\r\n  console.log('ProtectedRoute - User authenticated, rendering children');\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"names":[],"mappings":";;;;;AACA,mCAAmC;AACnC;AACA;AACA;;;AAJA;;;;AAMA,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAE;;IAClC,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,4IAAO;IAClD,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAE5B,IAAA,0KAAS;oCAAC;YACR,QAAQ,GAAG,CAAC,gCAAgC;gBAC1C;gBACA;gBACA,UAAU,uCAAgC,CAAC,CAAC,aAAa,OAAO,CAAC,kBAAkB;gBACnF,MAAM,OAAO,gBAAgB;gBAC7B,WAAW,IAAI,OAAO,WAAW;YACnC;QACF;mCAAG;QAAC;QAAiB;QAAS;KAAK;IAEnC,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,WAAW,CAAC,iBAAiB;gBAChC,QAAQ,GAAG,CAAC;gBACZ,IAAI,aAAa,UAAU;oBACzB,aAAa,OAAO,CAAC,sBAAsB;gBAC7C;gBACA,OAAO,IAAI,CAAC;YACd;QACF;mCAAG;QAAC;QAAS;QAAiB;QAAU;KAAO;IAE/C,IAAI,SAAS;QACX,QAAQ,GAAG,CAAC;QACZ,qBAAO,6LAAC;YAAI,WAAU;sBACpB,cAAA,6LAAC;gBAAI,WAAU;gBAA8B,MAAK;0BAChD,cAAA,6LAAC;oBAAK,WAAU;8BAAkB;;;;;;;;;;;;;;;;IAGxC;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO,MAAM,0CAA0C;IACzD;IAEA,QAAQ,GAAG,CAAC;IACZ,OAAO;AACT;GAxCM;;QACuC,4IAAO;QACnC,kJAAS;QACP,oJAAW;;;KAHxB;uCA0CS"}},
    {"offset": {"line": 1619, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/app/payment-history/page.tsx"],"sourcesContent":["\"use client\";\r\nimport PaymentHistory from '../../components/pages/PaymentHistory';\r\nimport Layout from '../../components/Layout';\r\nimport ProtectedRoute from '../../components/ProtectedRoute';\r\n\r\nexport default function PaymentHistoryPage() {\r\n    return (\r\n        <ProtectedRoute>\r\n            <Layout activeSection=\"payment\" setActiveSection={() => { }} userRole=\"user\">\r\n                <PaymentHistory />\r\n            </Layout>\r\n        </ProtectedRoute>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACpB,qBACI,6LAAC,kJAAc;kBACX,cAAA,6LAAC,0IAAM;YAAC,eAAc;YAAU,kBAAkB,KAAQ;YAAG,UAAS;sBAClE,cAAA,6LAAC,2JAAc;;;;;;;;;;;;;;;AAI/B;KARwB"}}]
}