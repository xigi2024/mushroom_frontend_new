{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/pages/Profile.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Row, Col, Card, Form, Button, Alert, Spinner, Badge } from 'react-bootstrap';\r\nimport { FiUser, FiMail, FiPhone, FiMapPin, FiEdit, FiSave, FiCamera } from 'react-icons/fi';\r\nimport axios from 'axios';\r\nimport '../styles/dashboard.css';\r\n\r\nconst Profile = () => {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n\r\n  const [userProfile, setUserProfile] = useState({\r\n    name: '',\r\n    email: '',\r\n    phone: '',\r\n    address: '123 Farm Street, Green Valley, Tamil Nadu',\r\n    joinDate: '2024-01-15'\r\n  });\r\n\r\n  // ðŸ”¹ Fetch user profile data from API\r\n  useEffect(() => {\r\n    const fetchProfile = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const token = localStorage.getItem('access_token'); // âœ… FIXED\r\n\r\n        const response = await axios.get('https://mycomatrix.in/api/profile/', {\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`\r\n          }\r\n        });\r\n\r\n        if (response.data.success) {\r\n          const userData = response.data.user;\r\n          setUser(userData);\r\n          setUserProfile({\r\n            name: `${userData.first_name || ''} ${userData.last_name || ''}`.trim(),\r\n            email: userData.email || '',\r\n            phone: userData.phone || '',\r\n            address: '123 Farm Street, Green Valley, Tamil Nadu',\r\n            joinDate: '2024-01-15'\r\n          });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching profile:', error);\r\n        setError('Failed to load profile data');\r\n        \r\n        // ðŸ”¹ Fallback to localStorage if API fails\r\n        const userData = localStorage.getItem('user');\r\n        if (userData) {\r\n          const user = JSON.parse(userData);\r\n          setUser(user);\r\n          setUserProfile({\r\n            name: `${user.first_name || ''} ${user.last_name || ''}`.trim(),\r\n            email: user.email || '',\r\n            phone: user.phone || '',\r\n            address: '123 Farm Street, Green Valley, Tamil Nadu',\r\n            joinDate: '2024-01-15'\r\n          });\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProfile();\r\n  }, []);\r\n\r\n  // ðŸ”¹ User initials for avatar\r\n  const getUserInitials = () => {\r\n    if (!user) return 'DR';\r\n    const { first_name, last_name } = user;\r\n    if (first_name && last_name) {\r\n      return `${first_name.charAt(0)}${last_name.charAt(0)}`.toUpperCase();\r\n    } else if (first_name) {\r\n      return first_name.charAt(0).toUpperCase();\r\n    } else if (last_name) {\r\n      return last_name.charAt(0).toUpperCase();\r\n    }\r\n    return 'DR';\r\n  };\r\n\r\n  // ðŸ”¹ User display name\r\n  const getUserDisplayName = () => {\r\n    if (!user) return 'User';\r\n    const { first_name, last_name } = user;\r\n    if (first_name && last_name) {\r\n      return `${first_name} ${last_name}`;\r\n    } else if (first_name) {\r\n      return first_name;\r\n    } else if (last_name) {\r\n      return last_name;\r\n    }\r\n    return user.email || 'User';\r\n  };\r\n\r\n  // ðŸ”¹ Save profile\r\n  const handleSave = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('access_token'); // âœ… FIXED\r\n\r\n      const updateData = {\r\n        first_name: userProfile.name.split(' ')[0],\r\n        last_name: userProfile.name.split(' ').slice(1).join(' '),\r\n        email: userProfile.email,\r\n        phone: userProfile.phone\r\n      };\r\n\r\n      const response = await axios.put('https://mycomatrix.in/api/profile/', updateData, {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`\r\n        }\r\n      });\r\n\r\n      if (response.data.success) {\r\n        setIsEditing(false);\r\n        setShowAlert(true);\r\n        setTimeout(() => setShowAlert(false), 3000);\r\n\r\n        const updatedUser = {\r\n          ...JSON.parse(localStorage.getItem('user') || '{}'),\r\n          first_name: updateData.first_name,\r\n          last_name: updateData.last_name,\r\n          email: updateData.email,\r\n          phone: updateData.phone\r\n        };\r\n        localStorage.setItem('user', JSON.stringify(updatedUser));\r\n        setUser(updatedUser);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      setError('Failed to update profile');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"d-flex justify-content-center align-items-center\" style={{ height: '50vh' }}>\r\n        <Spinner animation=\"border\" role=\"status\">\r\n          <span className=\"visually-hidden\">Loading...</span>\r\n        </Spinner>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile-container\" >\r\n      <div className=\"mb-4\">\r\n        <div className=\"d-flex justify-content-between align-items-center\">\r\n          <div>\r\n            <h2 className=\"mb-1\">Profile</h2>\r\n            <p className=\"text-muted mb-0\">Manage your personal information</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {error && (\r\n        <Alert variant=\"danger\" className=\"mb-4\" onClose={() => setError(null)} dismissible>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {showAlert && (\r\n        <Alert variant=\"success\" className=\"mb-4\">\r\n          Profile updated successfully!\r\n        </Alert>\r\n      )}\r\n\r\n      <Row>\r\n        <Col md={4}>\r\n          <Card className=\"border-0 shadow-sm mb-4\">\r\n            <Card.Body className=\"text-center py-5\">\r\n<div className=\"d-flex justify-content-center mb-3\">\r\n  <div \r\n    className=\"user-avatar-large d-flex align-items-center justify-content-center\" \r\n    style={{\r\n      width: '120px',\r\n      height: '120px',\r\n      borderRadius: '50%',\r\n      backgroundColor: '#F1FFF0',\r\n      fontSize: '48px',\r\n      fontWeight: 'bold',\r\n      color: '#15640d',\r\n      border: '2px solid #ddd'\r\n    }}\r\n  >\r\n    {getUserInitials()}\r\n  </div>\r\n</div>                <Button \r\n                  variant=\"primary\" \r\n                  size=\"sm\" \r\n                  className=\"position-absolute bottom-0 end-0 rounded-circle p-2\"\r\n                  style={{ width: '35px', height: '35px' }}\r\n                  disabled={true}\r\n                >\r\n                  <FiCamera size={14} />\r\n                </Button>\r\n             \r\n              <h5 className=\"mb-1\">{getUserDisplayName()}</h5>\r\n              <p className=\"text-muted mb-3\">Mushroom Farmer</p>\r\n              <Badge bg=\"success\" className=\"px-3 py-2\">Active Member</Badge>\r\n             \r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n\r\n        <Col md={8}>\r\n          <Card className=\"border-0 shadow-sm\">\r\n            <Card.Header className=\"bg-white border-bottom d-flex justify-content-between align-items-center\">\r\n              <h6 className=\"mb-0\">Personal Information</h6>\r\n              <Button \r\n                variant={isEditing ? \"button\" : \"outline-success\"} \r\n                size=\"sm\"\r\n                onClick={isEditing ? handleSave : () => setIsEditing(true)}\r\n                disabled={loading}\r\n              >\r\n                {loading ? (\r\n                  <Spinner animation=\"border\" size=\"sm\" />\r\n                ) : isEditing ? (\r\n                  <><FiSave className=\"me-2\" />Save</>\r\n                ) : (\r\n                  <><FiEdit className=\"me-2\" />Edit</>\r\n                )}\r\n              </Button>\r\n            </Card.Header>\r\n            <Card.Body>\r\n              <Form>\r\n                <Row>\r\n                  <Col md={6}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Label>Full Name</Form.Label>\r\n                      <Form.Control\r\n                      className='px-3 py-2'\r\n                        type=\"text\"\r\n                        value={userProfile.name}\r\n                        disabled={!isEditing || loading}\r\n                        onChange={(e) => setUserProfile({...userProfile, name: e.target.value})}\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                  <Col md={6}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Label >Email Address</Form.Label>\r\n                      <Form.Control\r\n                      className='px-3 py-2'\r\n                        type=\"email\"\r\n                        value={userProfile.email}\r\n                        disabled={!isEditing || loading}\r\n                        onChange={(e) => setUserProfile({...userProfile, email: e.target.value})}\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col md={6}>\r\n                    <Form.Group className=\"mb-3\">\r\n                      <Form.Label>Phone Number</Form.Label>\r\n                      <Form.Control\r\n                      className='px-3 py-2'\r\n                        type=\"tel\"\r\n                        value={userProfile.phone}\r\n                        disabled={!isEditing || loading}\r\n                        onChange={(e) => setUserProfile({...userProfile, phone: e.target.value})}\r\n                      />\r\n                    </Form.Group>\r\n                  </Col>\r\n                \r\n                </Row>\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>Address</Form.Label>\r\n                  <Form.Control\r\n                  className='px-3 py-2'\r\n                    as=\"textarea\"\r\n                    rows={2}\r\n                    value={userProfile.address}\r\n                    disabled={!isEditing || loading}\r\n                    onChange={(e) => setUserProfile({...userProfile, address: e.target.value})}\r\n                  />\r\n                </Form.Group>\r\n              </Form>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile; \r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { FiHome, FiMonitor, FiPackage, FiUser, FiSettings, FiCreditCard, FiLogOut, FiMenu, FiX } from 'react-icons/fi';\r\nimport './styles/sidebar.css';\r\nimport Link from 'next/link';\r\n\r\n\r\nconst Sidebar = ({ activeSection, setActiveSection }) => {\r\n  const [userRole, setUserRole] = useState(\"user\");\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  const [user, setUser] = useState(null);\r\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem('user');\r\n    if (userData) {\r\n      setUser(JSON.parse(userData));\r\n      setUserRole(JSON.parse(userData)?.role?.toLowerCase() || \"user\");\r\n    }\r\n  }, []);\r\n\r\n  const adminSidebarItems = [\r\n    { id: 'dashboard', icon: FiHome, label: 'Admin Dashboard', path: '/admin-dashboard' },\r\n    { id: 'iot-monitoring', icon: FiMonitor, label: 'IoT Monitoring', path: '/admin/iot-monitoring' },\r\n    { id: 'products', icon: FiPackage, label: 'Products Order', path: '/admin/product-order' },\r\n    { id: 'accounts', icon: FiUser, label: 'Accounts', path: '/accounts' },\r\n    //{ id: 'settings', icon: FiSettings, label: 'Settings', path: '/settings' },\r\n    { id: 'payment', icon: FiCreditCard, label: 'Payment History', path: '/payment-history' }\r\n  ];\r\n\r\n  const userSidebarItems = [\r\n    { id: 'dashboard', icon: FiHome, label: 'User Dashboard', path: '/user-dashboard' },\r\n    { id: 'iot-monitoring', icon: FiMonitor, label: 'IoT Monitoring', path: '/user/iot-monitoring' },\r\n    { id: 'products', icon: FiPackage, label: 'Products Order', path: '/user/product-order' },\r\n    { id: 'profile', icon: FiUser, label: 'My Profile', path: '/profile' },\r\n    { id: 'payment', icon: FiCreditCard, label: 'My Payments', path: '/user-payments' }\r\n  ];\r\n\r\n  const sidebarItems = userRole === 'admin' ? adminSidebarItems : userSidebarItems;\r\n\r\n  // Set active section based on current path\r\n  useEffect(() => {\r\n    const currentItem = sidebarItems.find(item => item.path === pathname);\r\n    if (currentItem) {\r\n      setActiveSection(currentItem.id);\r\n    }\r\n  }, [pathname, sidebarItems, setActiveSection]);\r\n\r\n  // Close mobile menu when route changes\r\n  useEffect(() => {\r\n    setIsMobileMenuOpen(false);\r\n  }, [pathname]);\r\n\r\n  // Prevent body scroll when mobile menu is open\r\n  useEffect(() => {\r\n    if (isMobileMenuOpen) {\r\n      document.body.classList.add('mobile-menu-open');\r\n    } else {\r\n      document.body.classList.remove('mobile-menu-open');\r\n    }\r\n    return () => {\r\n      document.body.classList.remove('mobile-menu-open');\r\n    };\r\n  }, [isMobileMenuOpen]);\r\n\r\n  const handleNavigation = (item) => {\r\n    if (item.path) {\r\n      router.push(item.path);\r\n      setActiveSection(item.id);\r\n      setIsMobileMenuOpen(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('refresh_token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('userRole');\r\n\r\n    // optional: remove guest cart\r\n    localStorage.removeItem('guest_cart');\r\n\r\n    router.push('/login');\r\n    window.location.reload(); // Force UI reset\r\n  };\r\n\r\n\r\n  const getUserInitials = () => {\r\n    if (!user) return 'U';\r\n    const { first_name } = user;\r\n    if (first_name) {\r\n      return first_name.charAt(0).toUpperCase();\r\n    }\r\n    return 'U';\r\n  };\r\n\r\n  const getUserDisplayName = () => {\r\n    if (!user) return 'User';\r\n    const { first_name, last_name } = user;\r\n    if (first_name && last_name) {\r\n      return `${first_name} ${last_name}`;\r\n    } else if (first_name) {\r\n      return first_name;\r\n    } else if (last_name) {\r\n      return last_name;\r\n    }\r\n    return user.email || 'User';\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Topbar */}\r\n      <div className=\"topbar\">\r\n        <div className=\"topbar-content\">\r\n          {/* Hamburger Menu for Mobile */}\r\n          <button\r\n            className=\"mobile-menu-toggle\"\r\n            onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\r\n            aria-label=\"Toggle menu\"\r\n          >\r\n            {isMobileMenuOpen ? <FiX size={24} /> : <FiMenu size={24} />}\r\n          </button>\r\n\r\n          <h2 className=\"dashboard-title\">\r\n            {userRole === 'admin' ? 'Admin Dashboard' : 'User Dashboard'}\r\n          </h2>\r\n\r\n          <div className=\"topbar-right\">\r\n            <span className=\"welcome-text\">Welcome, {getUserDisplayName()}</span>\r\n            <div className=\"user-avatar\">{getUserInitials()}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile Overlay */}\r\n      {isMobileMenuOpen && (\r\n        <div\r\n          className=\"mobile-overlay\"\r\n          onClick={() => setIsMobileMenuOpen(false)}\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <div className={`sidebar ${isMobileMenuOpen ? 'mobile-open' : ''}`}>\r\n        <div className=\"sidebar-header\">\r\n          <Link href=\"/\">\r\n            <img\r\n              src=\"/assets/logo2.png\"\r\n              alt=\"Logo\"\r\n              className=\"img-fluid sidebar-logo\"\r\n            />\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"sidebar-menu\">\r\n          {sidebarItems.map(item => (\r\n            <div\r\n              key={item.id}\r\n              className={`sidebar-item ${activeSection === item.id ? 'active' : ''}`}\r\n              onClick={() => handleNavigation(item)}\r\n            >\r\n              <item.icon className=\"sidebar-icon\" />\r\n              <span>{item.label}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"sidebar-footer\">\r\n          <div className=\"sidebar-item logout-item\" onClick={handleLogout}>\r\n            <FiLogOut className=\"sidebar-icon\" />\r\n            <span>Logout</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Sidebar;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 980, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/Layout.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react';\r\nimport Sidebar from './Sidebar';\r\n\r\nconst Layout = ({ children, activeSection, setActiveSection, userRole }) => {\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      <Sidebar activeSection={activeSection} setActiveSection={setActiveSection} userRole={userRole} />\r\n      <div className=\"main-content\">\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIA,MAAM,SAAS,CAAC,EAAE,QAAQ,EAAE,aAAa,EAAE,gBAAgB,EAAE,QAAQ,EAAE;IACrE,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2IAAO;gBAAC,eAAe;gBAAe,kBAAkB;gBAAkB,UAAU;;;;;;0BACrF,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;;AAIT;KATM;uCAWS"}},
    {"offset": {"line": 1028, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/components/ProtectedRoute.tsx"],"sourcesContent":["\"use client\";\r\n// src/components/ProtectedRoute.js\r\nimport React, { useEffect } from 'react';\r\nimport { useRouter, usePathname } from 'next/navigation';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  const { isAuthenticated, loading, user } = useAuth();\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n\r\n  useEffect(() => {\r\n    console.log('ProtectedRoute - Auth state:', {\r\n      isAuthenticated,\r\n      loading,\r\n      hasToken: typeof window !== 'undefined' ? !!localStorage.getItem('access_token') : false,\r\n      user: user ? 'User exists' : 'No user',\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }, [isAuthenticated, loading, user]);\r\n\r\n  useEffect(() => {\r\n    if (!loading && !isAuthenticated) {\r\n      console.log('ProtectedRoute - Not authenticated, redirecting to login');\r\n      if (pathname !== '/login') {\r\n        localStorage.setItem('redirectAfterLogin', pathname);\r\n      }\r\n      router.push('/login');\r\n    }\r\n  }, [loading, isAuthenticated, pathname, router]);\r\n\r\n  if (loading) {\r\n    console.log('ProtectedRoute - Loading authentication state...');\r\n    return <div className=\"d-flex justify-content-center align-items-center vh-100\">\r\n      <div className=\"spinner-border text-primary\" role=\"status\">\r\n        <span className=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n    </div>;\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return null; // Don't render anything while redirecting\r\n  }\r\n\r\n  console.log('ProtectedRoute - User authenticated, rendering children');\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"names":[],"mappings":";;;;;AACA,mCAAmC;AACnC;AACA;AACA;;;AAJA;;;;AAMA,MAAM,iBAAiB,CAAC,EAAE,QAAQ,EAAE;;IAClC,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,4IAAO;IAClD,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,WAAW,IAAA,oJAAW;IAE5B,IAAA,0KAAS;oCAAC;YACR,QAAQ,GAAG,CAAC,gCAAgC;gBAC1C;gBACA;gBACA,UAAU,uCAAgC,CAAC,CAAC,aAAa,OAAO,CAAC,kBAAkB;gBACnF,MAAM,OAAO,gBAAgB;gBAC7B,WAAW,IAAI,OAAO,WAAW;YACnC;QACF;mCAAG;QAAC;QAAiB;QAAS;KAAK;IAEnC,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,WAAW,CAAC,iBAAiB;gBAChC,QAAQ,GAAG,CAAC;gBACZ,IAAI,aAAa,UAAU;oBACzB,aAAa,OAAO,CAAC,sBAAsB;gBAC7C;gBACA,OAAO,IAAI,CAAC;YACd;QACF;mCAAG;QAAC;QAAS;QAAiB;QAAU;KAAO;IAE/C,IAAI,SAAS;QACX,QAAQ,GAAG,CAAC;QACZ,qBAAO,6LAAC;YAAI,WAAU;sBACpB,cAAA,6LAAC;gBAAI,WAAU;gBAA8B,MAAK;0BAChD,cAAA,6LAAC;oBAAK,WAAU;8BAAkB;;;;;;;;;;;;;;;;IAGxC;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO,MAAM,0CAA0C;IACzD;IAEA,QAAQ,GAAG,CAAC;IACZ,OAAO;AACT;GAxCM;;QACuC,4IAAO;QACnC,kJAAS;QACP,oJAAW;;;KAHxB;uCA0CS"}},
    {"offset": {"line": 1129, "column": 0}, "map": {"version":3,"sources":["file:///D:/mycomatrix/mushroom%20frontend/src/app/profile/page.tsx"],"sourcesContent":["\"use client\";\r\nimport Profile from '../../components/pages/Profile';\r\nimport Layout from '../../components/Layout';\r\nimport ProtectedRoute from '../../components/ProtectedRoute';\r\n\r\nexport default function ProfilePage() {\r\n    return (\r\n        <ProtectedRoute>\r\n            <Layout activeSection=\"profile\" setActiveSection={() => { }} userRole=\"user\">\r\n                <div className=\"dashboard-content\">\r\n                    <Profile />\r\n                </div>\r\n            </Layout>\r\n        </ProtectedRoute>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;AAKe,SAAS;IACpB,qBACI,6LAAC,kJAAc;kBACX,cAAA,6LAAC,0IAAM;YAAC,eAAc;YAAU,kBAAkB,KAAQ;YAAG,UAAS;sBAClE,cAAA,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,oJAAO;;;;;;;;;;;;;;;;;;;;AAK5B;KAVwB"}}]
}